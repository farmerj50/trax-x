{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gabby\\\\trax-x\\\\src\\\\components\\\\CandlestickChartStockPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { ChartComponent, SeriesCollectionDirective, SeriesDirective, Inject, DateTime, CandleSeries, Tooltip, Zoom, Crosshair } from \"@syncfusion/ej2-react-charts\";\nimport { registerLicense } from \"@syncfusion/ej2-base\";\n\n// Register the Syncfusion license\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nregisterLicense(\"Ngo9BigBOggjHTQxAR8/V1NMaF5cXmRCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdmWX5ednVWQ2BfVEJ+WEY=\");\n\n// Error boundary to gracefully handle runtime errors\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n  static getDerivedStateFromError() {\n    return {\n      hasError: true\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"Error in chart:\", error, errorInfo);\n  }\n  render() {\n    if (this.state.hasError) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          textAlign: \"center\"\n        },\n        children: \"Something went wrong with the chart.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 14\n      }, this);\n    }\n    return this.props.children;\n  }\n}\nconst CandlestickChartStockPage = ({\n  ticker,\n  entryPoint,\n  exitPoint,\n  additionalData\n}) => {\n  _s();\n  const [chartData, setChartData] = useState([]); // Holds the candlestick data\n  const [error, setError] = useState(\"\"); // Tracks error during data fetching\n  const [isMounted, setIsMounted] = useState(false); // Ensures chart is fully mounted\n  const chartRef = useRef(null); // Reference for ChartComponent\n\n  // Fetch candlestick chart data\n  useEffect(() => {\n    const fetchChartData = async () => {\n      try {\n        const response = await fetch(`http://localhost:5000/api/candlestick?ticker=${ticker}`);\n        const data = await response.json();\n        if (data.dates) {\n          // Format data for Syncfusion\n          const formattedData = data.dates.map((date, index) => ({\n            x: new Date(date),\n            open: data.open[index],\n            high: data.high[index],\n            low: data.low[index],\n            close: data.close[index]\n          }));\n          setChartData(formattedData);\n          setError(\"\");\n        } else {\n          setError(\"No data available for this stock.\");\n        }\n      } catch (err) {\n        console.error(`Error fetching data for ${ticker}:`, err);\n        setError(\"Failed to load chart data.\");\n      }\n    };\n    fetchChartData();\n  }, [ticker]);\n\n  // Ensure the chart is mounted before enabling features like crosshair\n  useEffect(() => {\n    if (chartRef.current) {\n      setIsMounted(true);\n      console.log('Chart dimensions:', chartRef.current.getBoundingClientRect());\n      console.log('Chart data:', chartData);\n    }\n  }, [chartRef]);\n  return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-container-stock-page\",\n      children: error ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          textAlign: \"center\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this) : chartData.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\",\n          textAlign: \"center\"\n        },\n        children: \"No chart data available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(ChartComponent, {\n        ref: chartRef,\n        id: `chart-${ticker}`,\n        primaryXAxis: {\n          valueType: \"DateTime\",\n          labelFormat: \"MMM dd\",\n          intervalType: \"Days\",\n          crosshairTooltip: {\n            enable: isMounted && chartData.length > 0\n          }\n        },\n        primaryYAxis: {\n          labelFormat: \"${value}\",\n          crosshairTooltip: {\n            enable: isMounted && chartData.length > 0\n          }\n        },\n        tooltip: {\n          enable: isMounted && chartData.length > 0\n        },\n        crosshair: {\n          enable: isMounted && chartData.length > 0,\n          lineType: \"Both\",\n          line: {\n            color: \"gray\",\n            width: 0.5\n          }\n        },\n        zoomSettings: {\n          enableMouseWheelZooming: true,\n          enablePinchZooming: true,\n          mode: \"XY\"\n        },\n        height: \"100%\",\n        width: \"100%\",\n        children: [/*#__PURE__*/_jsxDEV(Inject, {\n          services: [CandleSeries, DateTime, Tooltip, Zoom, Crosshair]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SeriesCollectionDirective, {\n          children: /*#__PURE__*/_jsxDEV(SeriesDirective, {\n            dataSource: chartData,\n            xName: \"x\",\n            open: \"open\",\n            high: \"high\",\n            low: \"low\",\n            close: \"close\",\n            type: \"Candle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(CandlestickChartStockPage, \"jYatykKPgOJpkKVoU/SpWq30QMQ=\");\n_c = CandlestickChartStockPage;\nexport default CandlestickChartStockPage;\nvar _c;\n$RefreshReg$(_c, \"CandlestickChartStockPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ChartComponent","SeriesCollectionDirective","SeriesDirective","Inject","DateTime","CandleSeries","Tooltip","Zoom","Crosshair","registerLicense","jsxDEV","_jsxDEV","ErrorBoundary","Component","constructor","props","state","hasError","getDerivedStateFromError","componentDidCatch","error","errorInfo","console","render","style","color","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","CandlestickChartStockPage","ticker","entryPoint","exitPoint","additionalData","_s","chartData","setChartData","setError","isMounted","setIsMounted","chartRef","fetchChartData","response","fetch","data","json","dates","formattedData","map","date","index","x","Date","open","high","low","close","err","current","log","getBoundingClientRect","className","length","ref","id","primaryXAxis","valueType","labelFormat","intervalType","crosshairTooltip","enable","primaryYAxis","tooltip","crosshair","lineType","line","width","zoomSettings","enableMouseWheelZooming","enablePinchZooming","mode","height","services","dataSource","xName","type","_c","$RefreshReg$"],"sources":["C:/Users/gabby/trax-x/src/components/CandlestickChartStockPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  ChartComponent,\r\n  SeriesCollectionDirective,\r\n  SeriesDirective,\r\n  Inject,\r\n  DateTime,\r\n  CandleSeries,\r\n  Tooltip,\r\n  Zoom,\r\n  Crosshair,\r\n} from \"@syncfusion/ej2-react-charts\";\r\nimport { registerLicense } from \"@syncfusion/ej2-base\";\r\n\r\n// Register the Syncfusion license\r\nregisterLicense(\"Ngo9BigBOggjHTQxAR8/V1NMaF5cXmRCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdmWX5ednVWQ2BfVEJ+WEY=\");\r\n\r\n// Error boundary to gracefully handle runtime errors\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError() {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    console.error(\"Error in chart:\", error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <p style={{ color: \"red\", textAlign: \"center\" }}>Something went wrong with the chart.</p>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nconst CandlestickChartStockPage = ({ ticker, entryPoint, exitPoint, additionalData }) => {\r\n  const [chartData, setChartData] = useState([]); // Holds the candlestick data\r\n  const [error, setError] = useState(\"\"); // Tracks error during data fetching\r\n  const [isMounted, setIsMounted] = useState(false); // Ensures chart is fully mounted\r\n  const chartRef = useRef(null); // Reference for ChartComponent\r\n\r\n  // Fetch candlestick chart data\r\n  useEffect(() => {\r\n    const fetchChartData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:5000/api/candlestick?ticker=${ticker}`);\r\n        const data = await response.json();\r\n\r\n        if (data.dates) {\r\n          // Format data for Syncfusion\r\n          const formattedData = data.dates.map((date, index) => ({\r\n            x: new Date(date),\r\n            open: data.open[index],\r\n            high: data.high[index],\r\n            low: data.low[index],\r\n            close: data.close[index],\r\n          }));\r\n          setChartData(formattedData);\r\n          setError(\"\");\r\n        } else {\r\n          setError(\"No data available for this stock.\");\r\n        }\r\n      } catch (err) {\r\n        console.error(`Error fetching data for ${ticker}:`, err);\r\n        setError(\"Failed to load chart data.\");\r\n      }\r\n    };\r\n\r\n    fetchChartData();\r\n  }, [ticker]);\r\n\r\n  // Ensure the chart is mounted before enabling features like crosshair\r\n  useEffect(() => {\r\n    if (chartRef.current) {\r\n      setIsMounted(true);\r\n      console.log('Chart dimensions:', chartRef.current.getBoundingClientRect());\r\n      console.log('Chart data:', chartData);\r\n  }\r\n  }, [chartRef]);\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div className=\"chart-container-stock-page\">\r\n        {error ? (\r\n          <p style={{ color: \"red\", textAlign: \"center\" }}>{error}</p>\r\n        ) : chartData.length === 0 ? (\r\n          <p style={{ color: \"red\", textAlign: \"center\" }}>No chart data available.</p>\r\n        ) : (\r\n          <ChartComponent\r\n            ref={chartRef}\r\n            id={`chart-${ticker}`}\r\n            primaryXAxis={{\r\n              valueType: \"DateTime\",\r\n              labelFormat: \"MMM dd\",\r\n              intervalType: \"Days\",\r\n              crosshairTooltip: { enable: isMounted && chartData.length > 0 },\r\n            }}\r\n            primaryYAxis={{\r\n              labelFormat: \"${value}\",\r\n              crosshairTooltip: { enable: isMounted && chartData.length > 0 },\r\n            }}\r\n            tooltip={{\r\n              enable: isMounted && chartData.length > 0,\r\n            }}\r\n            crosshair={{\r\n              enable: isMounted && chartData.length > 0,\r\n              lineType: \"Both\",\r\n              line: { color: \"gray\", width: 0.5 },\r\n            }}\r\n            zoomSettings={{\r\n              enableMouseWheelZooming: true,\r\n              enablePinchZooming: true,\r\n              mode: \"XY\",\r\n            }}\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n          >\r\n            <Inject services={[CandleSeries, DateTime, Tooltip, Zoom, Crosshair]} />\r\n            <SeriesCollectionDirective>\r\n              <SeriesDirective\r\n                dataSource={chartData}\r\n                xName=\"x\"\r\n                open=\"open\"\r\n                high=\"high\"\r\n                low=\"low\"\r\n                close=\"close\"\r\n                type=\"Candle\"\r\n              />\r\n            </SeriesCollectionDirective>\r\n          </ChartComponent>\r\n        )}\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default CandlestickChartStockPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}