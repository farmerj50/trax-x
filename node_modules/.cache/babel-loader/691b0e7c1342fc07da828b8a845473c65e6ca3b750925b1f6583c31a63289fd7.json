{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _saveSvgAsPng = require(\"save-svg-as-png\");\nvar _saveSvgAsPng2 = _interopRequireDefault(_saveSvgAsPng);\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar dx = 0;\nvar dy = 0;\nvar SaveChartAsImage = {\n  save: function save(doc, container, background, cb) {\n    _saveSvgAsPng2.default.svgAsDataUri(container.getElementsByTagName(\"svg\")[0], {}, function (uri) {\n      // eslint-disable-next-line prefer-const\n      var image = new Image();\n      image.onload = function () {\n        // eslint-disable-next-line prefer-const\n        var canvas = doc.createElement(\"canvas\");\n        canvas.width = image.width;\n        canvas.height = image.height;\n\n        // eslint-disable-next-line prefer-const\n        var context = canvas.getContext(\"2d\");\n        if ((0, _utils.isDefined)(background)) {\n          context.fillStyle = background;\n          context.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        var canvasList = container.getElementsByTagName(\"canvas\");\n        for (var i = 0; i < canvasList.length; i++) {\n          var each = canvasList[i];\n          if ((0, _utils.isDefined)(each)) {\n            var parent = each.parentNode.parentNode.getBoundingClientRect();\n            var rect = each.getBoundingClientRect();\n            context.drawImage(each, rect.left - parent.left + dx, rect.top - parent.top + dy);\n          }\n        }\n        context.drawImage(image, dx, dy);\n        cb(canvas.toDataURL(\"image/png\"));\n      };\n      image.src = uri;\n    });\n  },\n  saveWithWhiteBG: function saveWithWhiteBG(doc, container, cb) {\n    return this.saveWithBG(doc, container, \"white\", cb);\n  },\n  saveWithDarkBG: function saveWithDarkBG(doc, container, cb) {\n    return this.saveWithBG(doc, container, \"#303030\", cb);\n  },\n  saveWithBG: function saveWithBG(doc, container, background, cb) {\n    return this.save(doc, container, background, cb);\n  },\n  saveChartAsImage: function saveChartAsImage(container) {\n    this.saveWithWhiteBG(document, container, function (src) {\n      var a = document.createElement(\"a\");\n      a.setAttribute(\"href\", src);\n      a.setAttribute(\"download\", \"Chart.png\");\n      document.body.appendChild(a);\n      a.addEventListener(\"click\", function () /* e */{\n        a.parentNode.removeChild(a);\n      });\n      a.click();\n    });\n  }\n};\nexports.default = SaveChartAsImage;","map":{"version":3,"names":["_saveSvgAsPng","require","_utils","dx","dy","SaveChartAsImage","save","doc","container","background","cb","_saveSvgAsPng2","default","svgAsDataUri","getElementsByTagName","uri","image","Image","onload","canvas","createElement","width","height","context","getContext","isDefined","fillStyle","fillRect","canvasList","i","length","each","parent","parentNode","getBoundingClientRect","rect","drawImage","left","top","toDataURL","src","saveWithWhiteBG","saveWithBG","saveWithDarkBG","saveChartAsImage","document","a","setAttribute","body","appendChild","addEventListener","removeChild","click"],"sources":["C:\\Users\\gabby\\trax-x\\node_modules\\src\\lib\\helper\\SaveChartAsImage.js"],"sourcesContent":["\n\nimport saveAsPng from \"save-svg-as-png\";\nimport { isDefined } from \"../utils\";\n\nconst dx = 0;\nconst dy = 0;\n\nconst SaveChartAsImage = {\n\tsave(doc, container, background, cb) {\n\t\tsaveAsPng.svgAsDataUri(container.getElementsByTagName(\"svg\")[0], {}, function(uri) {\n\t\t\t// eslint-disable-next-line prefer-const\n\t\t\tlet image = new Image();\n\t\t\timage.onload = function() {\n\n\t\t\t\t// eslint-disable-next-line prefer-const\n\t\t\t\tlet canvas = doc.createElement(\"canvas\");\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\t// eslint-disable-next-line prefer-const\n\t\t\t\tlet context = canvas.getContext(\"2d\");\n\n\t\t\t\tif (isDefined(background)) {\n\t\t\t\t\tcontext.fillStyle = background;\n\t\t\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t}\n\t\t\t\tconst canvasList = container.getElementsByTagName(\"canvas\");\n\t\t\t\tfor (let i = 0; i < canvasList.length; i++) {\n\t\t\t\t\tconst each = canvasList[i];\n\t\t\t\t\tif (isDefined(each)) {\n\t\t\t\t\t\tconst parent = each.parentNode.parentNode.getBoundingClientRect();\n\t\t\t\t\t\tconst rect = each.getBoundingClientRect();\n\t\t\t\t\t\tcontext.drawImage(each, rect.left - parent.left + dx, rect.top - parent.top + dy);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontext.drawImage(image, dx, dy);\n\t\t\t\tcb(canvas.toDataURL(\"image/png\"));\n\t\t\t};\n\t\t\timage.src = uri;\n\t\t});\n\t},\n\tsaveWithWhiteBG(doc, container, cb) {\n\t\treturn this.saveWithBG(doc, container, \"white\", cb);\n\t},\n\tsaveWithDarkBG(doc, container, cb) {\n\t\treturn this.saveWithBG(doc, container, \"#303030\", cb);\n\t},\n\tsaveWithBG(doc, container, background, cb) {\n\t\treturn this.save(doc, container, background, cb);\n\t},\n\tsaveChartAsImage(container) {\n\t\tthis.saveWithWhiteBG(document, container, function(src) {\n\t\t\tconst a = document.createElement(\"a\");\n\t\t\ta.setAttribute(\"href\", src);\n\t\t\ta.setAttribute(\"download\", \"Chart.png\");\n\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.addEventListener(\"click\", function(/* e */) {\n\t\t\t\ta.parentNode.removeChild(a);\n\t\t\t});\n\n\t\t\ta.click();\n\t\t});\n\t}\n};\n\nexport default SaveChartAsImage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}