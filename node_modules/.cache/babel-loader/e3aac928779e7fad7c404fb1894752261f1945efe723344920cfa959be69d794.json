{"ast":null,"code":"import { GenericComponent } from \"./GenericComponent\";\nimport { isDefined } from \"./utils\";\nimport { ChartContext } from \"./Chart\";\nconst ALWAYS_TRUE_TYPES = [\"drag\", \"dragend\"];\nexport class GenericChartComponent extends GenericComponent {\n  constructor(props, context) {\n    super(props, context);\n    this.preCanvasDraw = this.preCanvasDraw.bind(this);\n    this.postCanvasDraw = this.postCanvasDraw.bind(this);\n    this.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n    this.preEvaluate = this.preEvaluate.bind(this);\n    this.updateMoreProps = this.updateMoreProps.bind(this);\n  }\n  preCanvasDraw(ctx, moreProps) {\n    super.preCanvasDraw(ctx, moreProps);\n    ctx.save();\n    const {\n      margin,\n      ratio\n    } = this.context;\n    const {\n      chartConfig: {\n        width,\n        height,\n        origin\n      }\n    } = moreProps;\n    const canvasOriginX = 0.5 * ratio + origin[0] + margin.left;\n    const canvasOriginY = 0.5 * ratio + origin[1] + margin.top;\n    const {\n      clip,\n      edgeClip\n    } = this.props;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.scale(ratio, ratio);\n    if (edgeClip) {\n      ctx.beginPath();\n      ctx.rect(-1, canvasOriginY - 10, width + margin.left + margin.right + 1, height + 20);\n      ctx.clip();\n    }\n    ctx.translate(canvasOriginX, canvasOriginY);\n    if (clip) {\n      ctx.beginPath();\n      ctx.rect(-1, -1, width + 1, height + 1);\n      ctx.clip();\n    }\n  }\n  postCanvasDraw(ctx, moreProps) {\n    super.postCanvasDraw(ctx, moreProps);\n    ctx.restore();\n  }\n  updateMoreProps(moreProps) {\n    super.updateMoreProps(moreProps);\n    const {\n      chartConfig: chartConfigList\n    } = moreProps;\n    if (chartConfigList && Array.isArray(chartConfigList)) {\n      const {\n        chartId\n      } = this.context;\n      const chartConfig = chartConfigList.find(each => each.id === chartId);\n      this.moreProps.chartConfig = chartConfig;\n    }\n    if (isDefined(this.moreProps.chartConfig)) {\n      const {\n        origin: [ox, oy]\n      } = this.moreProps.chartConfig;\n      if (isDefined(moreProps.mouseXY)) {\n        const {\n          mouseXY: [x, y]\n        } = moreProps;\n        this.moreProps.mouseXY = [x - ox, y - oy];\n      }\n      if (isDefined(moreProps.startPos)) {\n        const {\n          startPos: [x, y]\n        } = moreProps;\n        this.moreProps.startPos = [x - ox, y - oy];\n      }\n    }\n  }\n  preEvaluate(/* type, moreProps */\n  ) {\n    ///\n  }\n  shouldTypeProceed(type, moreProps) {\n    if ((type === \"mousemove\" || type === \"click\") && this.props.disablePan) {\n      return true;\n    }\n    if (ALWAYS_TRUE_TYPES.indexOf(type) === -1 && isDefined(moreProps) && isDefined(moreProps.currentCharts)) {\n      return moreProps.currentCharts.indexOf(this.context.chartId) > -1;\n    }\n    return true;\n  }\n}\nGenericChartComponent.defaultProps = GenericComponent.defaultProps;\nGenericChartComponent.contextType = ChartContext;","map":{"version":3,"names":["GenericComponent","isDefined","ChartContext","ALWAYS_TRUE_TYPES","GenericChartComponent","constructor","props","context","preCanvasDraw","bind","postCanvasDraw","shouldTypeProceed","preEvaluate","updateMoreProps","ctx","moreProps","save","margin","ratio","chartConfig","width","height","origin","canvasOriginX","left","canvasOriginY","top","clip","edgeClip","setTransform","scale","beginPath","rect","right","translate","restore","chartConfigList","Array","isArray","chartId","find","each","id","ox","oy","mouseXY","x","y","startPos","type","disablePan","indexOf","currentCharts","defaultProps","contextType"],"sources":["C:\\Users\\gabby\\trax-x\\node_modules\\@react-financial-charts\\core\\src\\GenericChartComponent.tsx"],"sourcesContent":["import { GenericComponent } from \"./GenericComponent\";\nimport { isDefined } from \"./utils\";\nimport { ChartContext } from \"./Chart\";\n\nconst ALWAYS_TRUE_TYPES = [\"drag\", \"dragend\"];\n\nexport class GenericChartComponent extends GenericComponent {\n    public static defaultProps = GenericComponent.defaultProps;\n    public static contextType = ChartContext;\n\n    public constructor(props: any, context: any) {\n        super(props, context);\n\n        this.preCanvasDraw = this.preCanvasDraw.bind(this);\n        this.postCanvasDraw = this.postCanvasDraw.bind(this);\n        this.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n        this.preEvaluate = this.preEvaluate.bind(this);\n        this.updateMoreProps = this.updateMoreProps.bind(this);\n    }\n\n    public preCanvasDraw(ctx: CanvasRenderingContext2D, moreProps: any) {\n        super.preCanvasDraw(ctx, moreProps);\n\n        ctx.save();\n        const { margin, ratio } = this.context;\n        const {\n            chartConfig: { width, height, origin },\n        } = moreProps;\n\n        const canvasOriginX = 0.5 * ratio + origin[0] + margin.left;\n        const canvasOriginY = 0.5 * ratio + origin[1] + margin.top;\n\n        const { clip, edgeClip } = this.props;\n\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.scale(ratio, ratio);\n        if (edgeClip) {\n            ctx.beginPath();\n            ctx.rect(-1, canvasOriginY - 10, width + margin.left + margin.right + 1, height + 20);\n            ctx.clip();\n        }\n\n        ctx.translate(canvasOriginX, canvasOriginY);\n\n        if (clip) {\n            ctx.beginPath();\n            ctx.rect(-1, -1, width + 1, height + 1);\n            ctx.clip();\n        }\n    }\n\n    public postCanvasDraw(ctx: CanvasRenderingContext2D, moreProps: any) {\n        super.postCanvasDraw(ctx, moreProps);\n        ctx.restore();\n    }\n\n    public updateMoreProps(moreProps: any) {\n        super.updateMoreProps(moreProps);\n        const { chartConfig: chartConfigList } = moreProps;\n\n        if (chartConfigList && Array.isArray(chartConfigList)) {\n            const { chartId } = this.context;\n            const chartConfig = chartConfigList.find((each) => each.id === chartId);\n            this.moreProps.chartConfig = chartConfig;\n        }\n        if (isDefined(this.moreProps.chartConfig)) {\n            const {\n                origin: [ox, oy],\n            } = this.moreProps.chartConfig;\n            if (isDefined(moreProps.mouseXY)) {\n                const {\n                    mouseXY: [x, y],\n                } = moreProps;\n                this.moreProps.mouseXY = [x - ox, y - oy];\n            }\n            if (isDefined(moreProps.startPos)) {\n                const {\n                    startPos: [x, y],\n                } = moreProps;\n                this.moreProps.startPos = [x - ox, y - oy];\n            }\n        }\n    }\n\n    public preEvaluate(/* type, moreProps */) {\n        ///\n    }\n\n    public shouldTypeProceed(type: string, moreProps: any) {\n        if ((type === \"mousemove\" || type === \"click\") && this.props.disablePan) {\n            return true;\n        }\n        if (ALWAYS_TRUE_TYPES.indexOf(type) === -1 && isDefined(moreProps) && isDefined(moreProps.currentCharts)) {\n            return moreProps.currentCharts.indexOf(this.context.chartId) > -1;\n        }\n        return true;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}