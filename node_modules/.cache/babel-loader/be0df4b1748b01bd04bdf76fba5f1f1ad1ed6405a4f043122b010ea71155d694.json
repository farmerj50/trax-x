{"ast":null,"code":"import { titlePositionX, textElement, appendChildElement, getElement, RectOption } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */function () {\n  function ToolBarSelector(chart) {\n    this.selectedSeries = '';\n    this.selectedIndicator = '';\n    this.selectedTrendLine = '';\n    this.indicators = [];\n    this.stockChart = chart;\n    this.selectedSeries = this.stockChart.series[0].type;\n  }\n  ToolBarSelector.prototype.initializePeriodSelector = function () {\n    var periods = this.stockChart.tempPeriods;\n    this.stockChart.periods = periods;\n    this.stockChart.periodSelector.rootControl = this.stockChart;\n    var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n    var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n    var height = this.stockChart.toolbarHeight;\n    this.stockChart.periodSelector.appendSelector({\n      thumbSize: 0,\n      element: htmlElement,\n      width: rect.width,\n      height: height\n    }, rect.x);\n    if (this.stockChart.seriesType.length > 0) {\n      this.initializeSeriesSelector();\n    }\n    this.initializeIndicatorSelector();\n    if (this.stockChart.trendlineType.length > 0) {\n      this.initializeTrendlineSelector();\n    }\n    this.exportButton();\n  };\n  /**\n   * This method returns itemModel for dropdown button.\n   *\n   * @param {ChartSeriesType[] | TechnicalIndicators[] | ExportType[] | TrendlineTypes[]} type - The type of data for the dropdown button (e.g., ChartSeriesType, TechnicalIndicators, ExportType, TrendlineTypes).\n   * @returns {ItemModel[]} - An array of item models for the dropdown button.\n   */\n  ToolBarSelector.prototype.getDropDownItems = function (type) {\n    var result = [];\n    if (type === this.stockChart.seriesType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n      for (var i = 0; i < this.stockChart.series.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text === 'OHLC' ? 'HiloOpenClose' : text;\n          if (text === this.stockChart.series[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n          }\n        }\n      }\n    } else if (type === this.stockChart.indicatorType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n        });\n      }\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        for (var j = 0; j < result.length; j++) {\n          var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n          text = text.toLowerCase().replace(/(^\\w|_\\w)/g, function (match) {\n            return match.toUpperCase();\n          }).replace(/_/g, '');\n          text = text === 'Accumulation distribution' ? 'AccumulationDistribution' : text === 'Bollinger bands' ? 'BollingerBands' : text;\n          if (text === this.stockChart.indicators[i].type) {\n            result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n            this.indicators.push(text);\n          }\n        }\n      }\n    } else if (type === this.stockChart.exportType) {\n      for (var i = 0; i < type.length; i++) {\n        result.push({\n          text: type[i].toString()\n        });\n      }\n    } else {\n      for (var i = 0; i < type.length; i++) {\n        if (type[i].toString() !== 'Print') {\n          result.push({\n            text: '&nbsp;&nbsp;&nbsp;' + type[i].toString()\n          });\n        }\n      }\n    }\n    return result;\n  };\n  /**\n   * This method changes the type of series while selectind series in dropdown button.\n   *\n   * @param {string} seriesType - The type of series selected from the dropdown button.\n   * @returns {void}\n   */\n  ToolBarSelector.prototype.addedSeries = function (seriesType) {\n    var series = this.stockChart.series;\n    for (var i = 0; i < series.length; i++) {\n      if (series[i].yName === 'volume') {\n        continue;\n      }\n      series[i].type = seriesType.indexOf('Candle') > -1 ? 'Candle' : seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType;\n      series[i].enableSolidCandles = seriesType === 'Candle';\n      for (var index = 0; index < series[i].trendlines.length; index++) {\n        var trendLine = series[i].trendlines[index];\n        trendLine.animation.enable = false;\n        trendLine.enableTooltip = false;\n      }\n    }\n  };\n  ToolBarSelector.prototype.initializeSeriesSelector = function () {\n    var _this = this;\n    if (this.stockChart.seriesType.indexOf('HiloOpenClose') > -1) {\n      this.stockChart.seriesType[this.stockChart.seriesType.indexOf('HiloOpenClose')] = 'OHLC';\n    }\n    if (this.stockChart.seriesType.indexOf('Candle') > -1 && this.stockChart.seriesType.indexOf('Hollow Candle') === -1) {\n      this.stockChart.seriesType[this.stockChart.seriesType.length] = 'Hollow Candle';\n    }\n    var seriesType = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.getDropDownItems(this.stockChart.seriesType),\n      select: function (args) {\n        _this.selectedSeries = args.item.text;\n        var text = _this.tickMark(args);\n        _this.addedSeries(text);\n        _this.stockChart.cartesianChart.initializeChart();\n        if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length && _this.stockChart.legendSettings.visible) {\n          var bounds = _this.stockChart.stockLegendModule.legendBounds;\n          _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n        }\n      }\n    });\n    seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n  };\n  ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n    var _this = this;\n    this.trendlineDropDown = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType),\n      select: function (args) {\n        var type = _this.tickMark(args);\n        _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n        if (_this.trendline !== type) {\n          _this.trendline = type;\n          for (var i = 0; i < _this.stockChart.series.length; i++) {\n            if (_this.stockChart.series[i].yName === 'volume') {\n              continue;\n            }\n            if (_this.stockChart.series[0].trendlines.length === 0) {\n              var trendlines = void 0;\n              if (_this.stockChart.trendlinetriggered) {\n                trendlines = [{\n                  type: type,\n                  width: 1,\n                  enableTooltip: false\n                }];\n                _this.stockChart.trendlinetriggered = false;\n              }\n              _this.stockChart.series[0].trendlines = trendlines;\n            } else {\n              _this.stockChart.series[0].trendlines[0].width = 1;\n              _this.stockChart.series[0].trendlines[0].type = type;\n              _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n            }\n          }\n          _this.stockChart.cartesianChart.initializeChart();\n        } else {\n          args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n          _this.stockChart.series[0].trendlines[0].width = 0;\n          _this.trendline = null;\n          _this.stockChart.cartesianChart.initializeChart();\n        }\n      }\n    });\n    this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n  };\n  ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n    var _this = this;\n    this.indicatorDropDown = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType),\n      select: function (args) {\n        for (var l = 0; l < _this.stockChart.series.length; l++) {\n          if (_this.stockChart.series[l].trendlines.length !== 0) {\n            _this.stockChart.series[l].trendlines[0].animation.enable = false;\n          }\n        }\n        args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) : args.item.text;\n        var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n        text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n        text = text.substr(0, 1).toUpperCase() + text.substr(1);\n        var type = text;\n        _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type : _this.selectedIndicator.replace(type, '');\n        if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n          if (_this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n            _this.indicators.push(type);\n            _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n            _this.stockChart.cartesianChart.initializeChart();\n          } else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n              if (_this.stockChart.indicators[z].type === type) {\n                _this.stockChart.indicators.splice(z, 1);\n              }\n            }\n            _this.indicators.splice(_this.indicators.indexOf(type), 1);\n            _this.stockChart.cartesianChart.initializeChart();\n          }\n        } else {\n          _this.createIndicatorAxes(type, args);\n        }\n      }\n    });\n    this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n  };\n  ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n    var currentSeries = this.stockChart.series[0];\n    var indicator = [{\n      type: type,\n      period: 3,\n      yAxisName: yAxisName,\n      dataSource: currentSeries.localData,\n      xName: currentSeries.xName,\n      open: currentSeries.open,\n      close: currentSeries.close,\n      high: currentSeries.high,\n      low: currentSeries.low,\n      volume: currentSeries.volume,\n      fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n      animation: {\n        enable: false\n      },\n      upperLine: {\n        color: '#FFE200',\n        width: 1\n      },\n      periodLine: {\n        width: 2\n      },\n      lowerLine: {\n        color: '#FAA512',\n        width: 1\n      },\n      fastPeriod: 8,\n      slowPeriod: 5,\n      macdType: 'Both',\n      width: 1,\n      macdPositiveColor: '#6EC992',\n      macdNegativeColor: '#FF817F',\n      bandColor: 'rgba(245, 203, 35, 0.12)'\n    }];\n    return indicator;\n  };\n  ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n    if (this.indicators.indexOf(type) === -1) {\n      args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      this.indicators.push(type);\n      var len = this.stockChart.rows.length;\n      this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n      var row = [{\n        height: '' + (100 - len * 15) + 'px'\n      }];\n      if (this.stockChart.rows.length === 1) {\n        this.stockChart.isSingleAxis = true;\n      }\n      this.stockChart.rows = this.stockChart.rows.concat(row);\n      if (!this.stockChart.isSingleAxis) {\n        this.stockChart.axes[0].rowIndex += 1;\n      } else {\n        for (var i = 0; i < this.stockChart.axes.length; i++) {\n          this.stockChart.axes[i].rowIndex += 1;\n        }\n      }\n      var axis = [{\n        plotOffset: 10,\n        opposedPosition: true,\n        rowIndex: !this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0,\n        desiredIntervals: 1,\n        labelFormat: 'n2',\n        majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n        lineStyle: this.stockChart.primaryYAxis.lineStyle,\n        labelPosition: this.stockChart.primaryYAxis.labelPosition,\n        majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n        rangePadding: 'None',\n        name: type.toString()\n      }];\n      this.stockChart.axes = this.stockChart.axes.concat(axis);\n      this.stockChart.primaryYAxis.rowIndex = !this.stockChart.isSingleAxis ? 0 : len + 1;\n      var indicator = this.getIndicator(type, type.toString());\n      this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n      this.stockChart.cartesianChart.initializeChart();\n    } else {\n      args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n      for (var i = 0; i < this.stockChart.indicators.length; i++) {\n        if (this.stockChart.indicators[i].type === type) {\n          this.stockChart.indicators.splice(i, 1);\n        }\n      }\n      this.indicators.splice(this.indicators.indexOf(type), 1);\n      var removedIndex = 0;\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].name === type) {\n          removedIndex = this.stockChart.axes[z].rowIndex;\n          this.stockChart.rows.splice(z, 1);\n          this.stockChart.axes.splice(z, 1);\n        }\n      }\n      for (var z = 0; z < this.stockChart.axes.length; z++) {\n        if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n          this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n        }\n      }\n      this.stockChart.cartesianChart.initializeChart();\n    }\n  };\n  ToolBarSelector.prototype.tickMark = function (args) {\n    var text;\n    var items = args.item['parentObj'].items;\n    for (var i = 0; i < items.length; i++) {\n      items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ? items[i].text.substr(items[i].text.indexOf(';') + 1) : items[i].text;\n      if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n        items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n      }\n    }\n    if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n      text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n      args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n    } else {\n      text = args.item.text.replace('&#10004&nbsp;', '');\n    }\n    return text;\n  };\n  ToolBarSelector.prototype.exportButton = function () {\n    var _this = this;\n    var exportChart = new DropDownButton({\n      enableHtmlSanitizer: false,\n      items: this.getDropDownItems(this.stockChart.exportType),\n      select: function (args) {\n        var type = args.item.text;\n        if (_this.stockChart.chart.exportModule) {\n          var stockChart = _this.stockChart;\n          var stockID = stockChart.element.id + '_stockChart_';\n          var svgHeight = stockChart.svgObject.getBoundingClientRect();\n          _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings(type === 'Print'));\n          var additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n          var rect = new RectOption('additionalRect', 'transparent', {\n            width: 0,\n            color: 'transparent'\n          }, 1, new Rect(0, 0, _this.stockChart.availableSize.width, additionalRect.height));\n          stockChart.svgObject.firstElementChild.insertAdjacentElement('afterbegin', _this.stockChart.renderer.drawRectangle(rect));\n          _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n          getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n          }\n          if (type === 'Print') {\n            _this.stockChart.chart.print(_this.stockChart.svgObject.id);\n          } else {\n            stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n          }\n          remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n          getElement(stockID + 'chart').style.transform = '';\n          if (stockChart.enableSelector) {\n            getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + stockChart.cartesianChart.cartesianChartSize.height + ')');\n          }\n          if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n            getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n          }\n          _this.stockChart.svgObject.setAttribute('height', svgHeight.height.toString());\n        }\n      }\n    });\n    exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n  };\n  ToolBarSelector.prototype.calculateAutoPeriods = function () {\n    var defaultPeriods = [];\n    var min = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMin] : this.stockChart.seriesXMin;\n    var max = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMax] : this.stockChart.seriesXMax;\n    defaultPeriods = this.findRange(min, max);\n    defaultPeriods.push({\n      text: 'YTD',\n      selected: true\n    }, {\n      text: 'All'\n    });\n    return defaultPeriods;\n  };\n  /**\n   * Finds the range of periods between the specified minimum and maximum values.\n   *\n   * @param {number} min - The minimum value of the range.\n   * @param {number} max - The maximum value of the range.\n   * @returns {PeriodsModel[]} - An array of PeriodsModel objects that fall within the specified range.\n   * @private\n   */\n  ToolBarSelector.prototype.findRange = function (min, max) {\n    var defaultPeriods = [];\n    if ((max - min) / 3.154e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      }, {\n        text: '1Y',\n        interval: 1,\n        intervalType: 'Years'\n      });\n    } else if ((max - min) / 1.577e+10 >= 1) {\n      defaultPeriods.push({\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      }, {\n        text: '3M',\n        interval: 3,\n        intervalType: 'Months'\n      }, {\n        text: '6M',\n        interval: 6,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 2.628e+9 >= 1) {\n      defaultPeriods.push({\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      }, {\n        text: '3W',\n        interval: 3,\n        intervalType: 'Weeks'\n      }, {\n        text: '1M',\n        interval: 1,\n        intervalType: 'Months'\n      });\n    } else if ((max - min) / 8.64e+7 >= 1) {\n      defaultPeriods.push({\n        text: '1H',\n        interval: 1,\n        intervalType: 'Hours'\n      }, {\n        text: '12H',\n        interval: 12,\n        intervalType: 'Hours'\n      }, {\n        text: '1D',\n        interval: 1,\n        intervalType: 'Days'\n      });\n    }\n    return defaultPeriods;\n  };\n  /**\n   * Text elements added to while export the chart\n   * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n   *\n   * @param {boolean} isPrint - Specifies whether the export is for printing.\n   * @returns {Element} - The element containing the exported chart details.\n   */\n  ToolBarSelector.prototype.addExportSettings = function (isPrint) {\n    var exportElement = this.stockChart.renderer.createGroup({\n      id: this.stockChart.element.id + '_additionalExport',\n      width: this.stockChart.availableSize.width,\n      fill: this.stockChart.background ? this.stockChart.background : 'transparent'\n    });\n    var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle, this.stockChart.themeStyle.chartTitleFont).height;\n    var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n    textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color || this.stockChart.themeStyle.chartTitleFont.color, exportElement, null, null, null, null, null, null, null, null, null, null, this.stockChart.themeStyle.chartTitleFont);\n    if (isPrint) {\n      return exportElement;\n    }\n    var style = {\n      size: '16px',\n      fontWeight: '600',\n      color: this.stockChart.themeStyle.chartTitleFont.color,\n      fontStyle: 'Normal',\n      fontFamily: this.stockChart.themeStyle.chartTitleFont.fontFamily\n    };\n    var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n    var y = titleHeight;\n    this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n    x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n    if (this.selectedIndicator !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n      x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n    }\n    if (this.selectedTrendLine !== '') {\n      this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n    }\n    return exportElement;\n  };\n  /** @private */\n  ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n    if (isMinus === void 0) {\n      isMinus = false;\n    }\n    if (forceAnimate === void 0) {\n      forceAnimate = false;\n    }\n    var renderer = new SvgRenderer('');\n    var renderOptions = {};\n    var tspanElement;\n    renderOptions = {\n      'id': options.id,\n      'font-style': font.fontStyle,\n      'font-family': font.fontFamily,\n      'font-weight': font.fontWeight,\n      'text-anchor': options.anchor,\n      'x': options.x,\n      'y': options.y,\n      'fill': color,\n      'font-size': font.size,\n      'transform': options.transform,\n      'opacity': font.opacity,\n      'dominant-baseline': options.baseLine\n    };\n    var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n    var htmlObject = renderer.createText(renderOptions, text);\n    if (typeof options.text !== 'string' && options.text.length > 1) {\n      for (var i = 1, len = options.text.length; i < len; i++) {\n        options.text[i] = ' ' + options.text[i];\n        tspanElement = renderer.createTSpan({\n          'x': options.x + measureText(text, font).width + 5,\n          'id': options.id,\n          'y': options.y,\n          opacity: 0.5\n        }, options.text[i]);\n        htmlObject.appendChild(tspanElement);\n      }\n    }\n    appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n    return htmlObject;\n  };\n  return ToolBarSelector;\n}();\nexport { ToolBarSelector };","map":{"version":3,"names":["titlePositionX","textElement","appendChildElement","getElement","RectOption","DropDownButton","Rect","TextOption","measureText","SvgRenderer","remove","ToolBarSelector","chart","selectedSeries","selectedIndicator","selectedTrendLine","indicators","stockChart","series","type","prototype","initializePeriodSelector","periods","tempPeriods","periodSelector","rootControl","rect","chartAxisLayoutPanel","seriesClipRect","htmlElement","element","id","height","toolbarHeight","appendSelector","thumbSize","width","x","seriesType","length","initializeSeriesSelector","initializeIndicatorSelector","trendlineType","initializeTrendlineSelector","exportButton","getDropDownItems","result","i","push","text","toString","j","replace","indicatorType","toLowerCase","match","toUpperCase","exportType","addedSeries","yName","indexOf","enableSolidCandles","index","trendlines","trendLine","animation","enable","enableTooltip","_this","enableHtmlSanitizer","items","select","args","item","tickMark","cartesianChart","initializeChart","stockLegendModule","legendCollections","legendSettings","visible","bounds","legendBounds","renderLegend","appendTo","trendlineDropDown","resizeTo","trendline","trendlinetriggered","indicatorDropDown","l","substr","split","toLocaleLowerCase","indicator","getIndicator","yAxisName","concat","z","splice","createIndicatorAxes","currentSeries","period","dataSource","localData","xName","open","close","high","low","volume","fill","upperLine","color","periodLine","lowerLine","fastPeriod","slowPeriod","macdType","macdPositiveColor","macdNegativeColor","bandColor","len","rows","row","isSingleAxis","axes","rowIndex","axis","plotOffset","opposedPosition","desiredIntervals","labelFormat","majorGridLines","primaryYAxis","lineStyle","labelPosition","majorTickLines","rangePadding","name","removedIndex","exportChart","exportModule","stockID","svgHeight","svgObject","getBoundingClientRect","insertAdjacentElement","addExportSettings","additionalRect","firstElementChild","availableSize","renderer","drawRectangle","setAttribute","style","transform","enableSelector","cartesianChartSize","print","export","clientHeight","calculateAutoPeriods","defaultPeriods","min","isDateTimeCategory","sortedData","seriesXMin","max","seriesXMax","findRange","selected","interval","intervalType","isPrint","exportElement","createGroup","background","titleHeight","title","titleStyle","themeStyle","chartTitleFont","options","size","fontWeight","fontStyle","fontFamily","y","textElementSpan","font","parent","isMinus","redraw","isAnimate","forceAnimate","animateDuration","renderOptions","tspanElement","anchor","opacity","baseLine","htmlObject","createText","createTSpan","appendChild"],"sources":["C:/Users/gabby/trax-x/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/toolbar-selector.js"],"sourcesContent":["import { titlePositionX, textElement, appendChildElement, getElement, RectOption } from '../../common/utils/helper';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Rect, TextOption, measureText, SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { remove } from '@syncfusion/ej2-base';\n/**\n * Period selector for range navigator\n */\n/** @private */\nvar ToolBarSelector = /** @class */ (function () {\n    function ToolBarSelector(chart) {\n        this.selectedSeries = '';\n        this.selectedIndicator = '';\n        this.selectedTrendLine = '';\n        this.indicators = [];\n        this.stockChart = chart;\n        this.selectedSeries = this.stockChart.series[0].type;\n    }\n    ToolBarSelector.prototype.initializePeriodSelector = function () {\n        var periods = this.stockChart.tempPeriods;\n        this.stockChart.periods = periods;\n        this.stockChart.periodSelector.rootControl = this.stockChart;\n        var rect = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect;\n        var htmlElement = getElement(this.stockChart.element.id + '_Secondary_Element');\n        var height = this.stockChart.toolbarHeight;\n        this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: htmlElement, width: rect.width, height: height }, rect.x);\n        if (this.stockChart.seriesType.length > 0) {\n            this.initializeSeriesSelector();\n        }\n        this.initializeIndicatorSelector();\n        if (this.stockChart.trendlineType.length > 0) {\n            this.initializeTrendlineSelector();\n        }\n        this.exportButton();\n    };\n    /**\n     * This method returns itemModel for dropdown button.\n     *\n     * @param {ChartSeriesType[] | TechnicalIndicators[] | ExportType[] | TrendlineTypes[]} type - The type of data for the dropdown button (e.g., ChartSeriesType, TechnicalIndicators, ExportType, TrendlineTypes).\n     * @returns {ItemModel[]} - An array of item models for the dropdown button.\n     */\n    ToolBarSelector.prototype.getDropDownItems = function (type) {\n        var result = [];\n        if (type === this.stockChart.seriesType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n            }\n            for (var i = 0; i < this.stockChart.series.length; i++) {\n                for (var j = 0; j < result.length; j++) {\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n                    text = (text === 'OHLC') ? 'HiloOpenClose' : text;\n                    if (text === this.stockChart.series[i].type) {\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n                    }\n                }\n            }\n        }\n        else if (type === this.stockChart.indicatorType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n            }\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\n                for (var j = 0; j < result.length; j++) {\n                    var text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '');\n                    text = text.toLowerCase().replace(/(^\\w|_\\w)/g, function (match) { return match.toUpperCase(); }).replace(/_/g, '');\n                    text = text === 'Accumulation distribution' ? 'AccumulationDistribution' : text === 'Bollinger bands' ? 'BollingerBands' : text;\n                    if (text === this.stockChart.indicators[i].type) {\n                        result[j].text = result[j].text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n                        this.indicators.push(text);\n                    }\n                }\n            }\n        }\n        else if (type === this.stockChart.exportType) {\n            for (var i = 0; i < type.length; i++) {\n                result.push({ text: type[i].toString() });\n            }\n        }\n        else {\n            for (var i = 0; i < type.length; i++) {\n                if (type[i].toString() !== 'Print') {\n                    result.push({ text: '&nbsp;&nbsp;&nbsp;' + type[i].toString() });\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * This method changes the type of series while selectind series in dropdown button.\n     *\n     * @param {string} seriesType - The type of series selected from the dropdown button.\n     * @returns {void}\n     */\n    ToolBarSelector.prototype.addedSeries = function (seriesType) {\n        var series = this.stockChart.series;\n        for (var i = 0; i < series.length; i++) {\n            if (series[i].yName === 'volume') {\n                continue;\n            }\n            series[i].type = (seriesType.indexOf('Candle') > -1 ? 'Candle' :\n                (seriesType.indexOf('OHLC') > -1 ? 'HiloOpenClose' : seriesType));\n            series[i].enableSolidCandles = seriesType === 'Candle';\n            for (var index = 0; index < series[i].trendlines.length; index++) {\n                var trendLine = series[i].trendlines[index];\n                trendLine.animation.enable = false;\n                trendLine.enableTooltip = false;\n            }\n        }\n    };\n    ToolBarSelector.prototype.initializeSeriesSelector = function () {\n        var _this = this;\n        if (this.stockChart.seriesType.indexOf('HiloOpenClose') > -1) {\n            this.stockChart.seriesType[this.stockChart.seriesType.indexOf('HiloOpenClose')] = 'OHLC';\n        }\n        if (this.stockChart.seriesType.indexOf('Candle') > -1 && this.stockChart.seriesType.indexOf('Hollow Candle') === -1) {\n            this.stockChart.seriesType[this.stockChart.seriesType.length] = 'Hollow Candle';\n        }\n        var seriesType = new DropDownButton({\n            enableHtmlSanitizer: false,\n            items: this.getDropDownItems(this.stockChart.seriesType),\n            select: function (args) {\n                _this.selectedSeries = args.item.text;\n                var text = _this.tickMark(args);\n                _this.addedSeries(text);\n                _this.stockChart.cartesianChart.initializeChart();\n                if (_this.stockChart.stockLegendModule && _this.stockChart.stockLegendModule.legendCollections.length\n                    && _this.stockChart.legendSettings.visible) {\n                    var bounds = _this.stockChart.stockLegendModule.legendBounds;\n                    _this.stockChart.stockLegendModule.renderLegend(_this.stockChart, _this.stockChart.legendSettings, bounds);\n                }\n            }\n        });\n        seriesType.appendTo('#' + this.stockChart.element.id + '_seriesType');\n    };\n    ToolBarSelector.prototype.initializeTrendlineSelector = function () {\n        var _this = this;\n        this.trendlineDropDown = new DropDownButton({\n            enableHtmlSanitizer: false,\n            items: this.stockChart.resizeTo ? this.trendlineDropDown.items :\n                this.getDropDownItems(this.stockChart.trendlineType),\n            select: function (args) {\n                var type = _this.tickMark(args);\n                _this.selectedTrendLine = _this.selectedTrendLine === '' ? type : _this.selectedTrendLine + ',' + type;\n                if (_this.trendline !== type) {\n                    _this.trendline = type;\n                    for (var i = 0; i < _this.stockChart.series.length; i++) {\n                        if (_this.stockChart.series[i].yName === 'volume') {\n                            continue;\n                        }\n                        if (_this.stockChart.series[0].trendlines.length === 0) {\n                            var trendlines = void 0;\n                            if (_this.stockChart.trendlinetriggered) {\n                                trendlines = [{ type: type, width: 1, enableTooltip: false }];\n                                _this.stockChart.trendlinetriggered = false;\n                            }\n                            _this.stockChart.series[0].trendlines = trendlines;\n                        }\n                        else {\n                            _this.stockChart.series[0].trendlines[0].width = 1;\n                            _this.stockChart.series[0].trendlines[0].type = type;\n                            _this.stockChart.series[0].trendlines[0].animation.enable = _this.stockChart.trendlinetriggered ? true : false;\n                        }\n                    }\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n                else {\n                    args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text.replace('&#10004&nbsp;', '');\n                    _this.stockChart.series[0].trendlines[0].width = 0;\n                    _this.trendline = null;\n                    _this.stockChart.cartesianChart.initializeChart();\n                }\n            }\n        });\n        this.trendlineDropDown.appendTo('#' + this.stockChart.element.id + '_trendType');\n    };\n    ToolBarSelector.prototype.initializeIndicatorSelector = function () {\n        var _this = this;\n        this.indicatorDropDown = new DropDownButton({\n            enableHtmlSanitizer: false,\n            items: this.stockChart.resizeTo ? this.indicatorDropDown.items :\n                this.getDropDownItems(this.stockChart.indicatorType),\n            select: function (args) {\n                for (var l = 0; l < _this.stockChart.series.length; l++) {\n                    if (_this.stockChart.series[l].trendlines.length !== 0) {\n                        _this.stockChart.series[l].trendlines[0].animation.enable = false;\n                    }\n                }\n                args.item.text = args.item.text.indexOf('&#10004&nbsp;') >= 0 ? args.item.text.substr(args.item.text.indexOf(';') + 1) :\n                    args.item.text;\n                var text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                text = text.split(' ')[0].toLocaleLowerCase() + (text.split(' ')[1] ? text.split(' ')[1] : '');\n                text = text.substr(0, 1).toUpperCase() + text.substr(1);\n                var type = text;\n                _this.selectedIndicator = _this.selectedIndicator.indexOf(type) === -1 ? _this.selectedIndicator + ' ' + type :\n                    _this.selectedIndicator.replace(type, '');\n                if (type === 'Tma' || type === 'BollingerBands' || type === 'Sma' || type === 'Ema') {\n                    if (_this.indicators.indexOf(type) === -1) {\n                        args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n                        var indicator = _this.getIndicator(type, _this.stockChart.series[0].yAxisName);\n                        _this.indicators.push(type);\n                        _this.stockChart.indicators = _this.stockChart.indicators.concat(indicator);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                    else {\n                        args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n                        for (var z = 0; z < _this.stockChart.indicators.length; z++) {\n                            if (_this.stockChart.indicators[z].type === type) {\n                                _this.stockChart.indicators.splice(z, 1);\n                            }\n                        }\n                        _this.indicators.splice(_this.indicators.indexOf(type), 1);\n                        _this.stockChart.cartesianChart.initializeChart();\n                    }\n                }\n                else {\n                    _this.createIndicatorAxes(type, args);\n                }\n            }\n        });\n        this.indicatorDropDown.appendTo('#' + this.stockChart.element.id + '_indicatorType');\n    };\n    ToolBarSelector.prototype.getIndicator = function (type, yAxisName) {\n        var currentSeries = this.stockChart.series[0];\n        var indicator = [{\n                type: type, period: 3, yAxisName: yAxisName,\n                dataSource: currentSeries.localData,\n                xName: currentSeries.xName,\n                open: currentSeries.open,\n                close: currentSeries.close,\n                high: currentSeries.high,\n                low: currentSeries.low,\n                volume: currentSeries.volume,\n                fill: type === 'Sma' ? '#32CD32' : '#6063ff',\n                animation: { enable: false }, upperLine: { color: '#FFE200', width: 1 },\n                periodLine: { width: 2 }, lowerLine: { color: '#FAA512', width: 1 },\n                fastPeriod: 8, slowPeriod: 5, macdType: 'Both', width: 1,\n                macdPositiveColor: '#6EC992', macdNegativeColor: '#FF817F',\n                bandColor: 'rgba(245, 203, 35, 0.12)'\n            }];\n        return indicator;\n    };\n    ToolBarSelector.prototype.createIndicatorAxes = function (type, args) {\n        if (this.indicators.indexOf(type) === -1) {\n            args.item.text = '&#10004&nbsp;' + args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            this.indicators.push(type);\n            var len = this.stockChart.rows.length;\n            this.stockChart.rows[this.stockChart.rows.length - 1].height = '15%';\n            var row = [{ height: '' + (100 - len * 15) + 'px' }];\n            if (this.stockChart.rows.length === 1) {\n                this.stockChart.isSingleAxis = true;\n            }\n            this.stockChart.rows = this.stockChart.rows.concat(row);\n            if (!this.stockChart.isSingleAxis) {\n                this.stockChart.axes[0].rowIndex += 1;\n            }\n            else {\n                for (var i = 0; i < this.stockChart.axes.length; i++) {\n                    this.stockChart.axes[i].rowIndex += 1;\n                }\n            }\n            var axis = [{\n                    plotOffset: 10, opposedPosition: true,\n                    rowIndex: (!this.stockChart.isSingleAxis ? this.stockChart.axes.length : 0),\n                    desiredIntervals: 1,\n                    labelFormat: 'n2',\n                    majorGridLines: this.stockChart.primaryYAxis.majorGridLines,\n                    lineStyle: this.stockChart.primaryYAxis.lineStyle,\n                    labelPosition: this.stockChart.primaryYAxis.labelPosition,\n                    majorTickLines: this.stockChart.primaryYAxis.majorTickLines,\n                    rangePadding: 'None', name: type.toString()\n                }];\n            this.stockChart.axes = this.stockChart.axes.concat(axis);\n            this.stockChart.primaryYAxis.rowIndex = (!this.stockChart.isSingleAxis ? 0 : len + 1);\n            var indicator = this.getIndicator(type, type.toString());\n            this.stockChart.indicators = this.stockChart.indicators.concat(indicator);\n            this.stockChart.cartesianChart.initializeChart();\n        }\n        else {\n            args.item.text = '&nbsp;&nbsp;&nbsp;' + args.item.text;\n            for (var i = 0; i < this.stockChart.indicators.length; i++) {\n                if (this.stockChart.indicators[i].type === type) {\n                    this.stockChart.indicators.splice(i, 1);\n                }\n            }\n            this.indicators.splice(this.indicators.indexOf(type), 1);\n            var removedIndex = 0;\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].name === type) {\n                    removedIndex = this.stockChart.axes[z].rowIndex;\n                    this.stockChart.rows.splice(z, 1);\n                    this.stockChart.axes.splice(z, 1);\n                }\n            }\n            for (var z = 0; z < this.stockChart.axes.length; z++) {\n                if (this.stockChart.axes[z].rowIndex !== 0 && this.stockChart.axes[z].rowIndex > removedIndex) {\n                    this.stockChart.axes[z].rowIndex = this.stockChart.axes[z].rowIndex - 1;\n                }\n            }\n            this.stockChart.cartesianChart.initializeChart();\n        }\n    };\n    ToolBarSelector.prototype.tickMark = function (args) {\n        var text;\n        var items = args.item['parentObj'].items;\n        for (var i = 0; i < items.length; i++) {\n            items[i].text = items[i].text.indexOf('&#10004&nbsp;') >= 0 ?\n                items[i].text.substr(items[i].text.indexOf(';') + 1) :\n                items[i].text;\n            if (!(items[i].text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0)) {\n                items[i].text = '&nbsp;&nbsp;&nbsp;' + items[i].text;\n            }\n        }\n        if (args.item.text.indexOf('&nbsp;&nbsp;&nbsp;') >= 0) {\n            text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '');\n            args.item.text = args.item.text.replace('&nbsp;&nbsp;&nbsp;', '&#10004&nbsp;');\n        }\n        else {\n            text = args.item.text.replace('&#10004&nbsp;', '');\n        }\n        return text;\n    };\n    ToolBarSelector.prototype.exportButton = function () {\n        var _this = this;\n        var exportChart = new DropDownButton({\n            enableHtmlSanitizer: false,\n            items: this.getDropDownItems(this.stockChart.exportType),\n            select: function (args) {\n                var type = args.item.text;\n                if (_this.stockChart.chart.exportModule) {\n                    var stockChart = _this.stockChart;\n                    var stockID = stockChart.element.id + '_stockChart_';\n                    var svgHeight = stockChart.svgObject.getBoundingClientRect();\n                    _this.stockChart.svgObject.insertAdjacentElement('afterbegin', _this.addExportSettings(type === 'Print'));\n                    var additionalRect = stockChart.svgObject.firstElementChild.getBoundingClientRect();\n                    var rect = new RectOption('additionalRect', 'transparent', { width: 0, color: 'transparent' }, 1, new Rect(0, 0, _this.stockChart.availableSize.width, additionalRect.height));\n                    stockChart.svgObject.firstElementChild.insertAdjacentElement('afterbegin', _this.stockChart.renderer.drawRectangle(rect));\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height + additionalRect.height).toString());\n                    getElement(stockID + 'chart').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height + additionalRect.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(' + additionalRect.height + 'px)';\n                    }\n                    if (type === 'Print') {\n                        _this.stockChart.chart.print(_this.stockChart.svgObject.id);\n                    }\n                    else {\n                        stockChart.chart.exportModule.export(type, 'StockChart', null, [stockChart], null, stockChart.svgObject.clientHeight);\n                    }\n                    remove(getElement(_this.stockChart.element.id + '_additionalExport'));\n                    getElement(stockID + 'chart').style.transform = '';\n                    if (stockChart.enableSelector) {\n                        getElement(stockID + 'rangeSelector').setAttribute('transform', 'translate(' + 0 + ',' + (stockChart.cartesianChart.cartesianChartSize.height) + ')');\n                    }\n                    if (_this.stockChart.legendSettings.visible && _this.stockChart.stockLegendModule) {\n                        getElement(stockChart.element.id + '_chart_legend_g').style.transform = 'translateY(0px)';\n                    }\n                    _this.stockChart.svgObject.setAttribute('height', (svgHeight.height).toString());\n                }\n            }\n        });\n        exportChart.appendTo('#' + this.stockChart.element.id + '_export');\n    };\n    ToolBarSelector.prototype.calculateAutoPeriods = function () {\n        var defaultPeriods = [];\n        var min = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMin] :\n            this.stockChart.seriesXMin;\n        var max = this.stockChart.isDateTimeCategory ? this.stockChart.sortedData[this.stockChart.seriesXMax] :\n            this.stockChart.seriesXMax;\n        defaultPeriods = this.findRange(min, max);\n        defaultPeriods.push({ text: 'YTD', selected: true }, { text: 'All' });\n        return defaultPeriods;\n    };\n    /**\n     * Finds the range of periods between the specified minimum and maximum values.\n     *\n     * @param {number} min - The minimum value of the range.\n     * @param {number} max - The maximum value of the range.\n     * @returns {PeriodsModel[]} - An array of PeriodsModel objects that fall within the specified range.\n     * @private\n     */\n    ToolBarSelector.prototype.findRange = function (min, max) {\n        var defaultPeriods = [];\n        if (((max - min) / 3.154e+10) >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' }, { text: '1Y', interval: 1, intervalType: 'Years' });\n        }\n        else if ((max - min) / 1.577e+10 >= 1) {\n            defaultPeriods.push({ text: '1M', interval: 1, intervalType: 'Months' }, { text: '3M', interval: 3, intervalType: 'Months' }, { text: '6M', interval: 6, intervalType: 'Months' });\n        }\n        else if ((max - min) / 2.628e+9 >= 1) {\n            defaultPeriods.push({ text: '1D', interval: 1, intervalType: 'Days' }, { text: '3W', interval: 3, intervalType: 'Weeks' }, { text: '1M', interval: 1, intervalType: 'Months' });\n        }\n        else if ((max - min) / 8.64e+7 >= 1) {\n            defaultPeriods.push({ text: '1H', interval: 1, intervalType: 'Hours' }, { text: '12H', interval: 12, intervalType: 'Hours' }, { text: '1D', interval: 1, intervalType: 'Days' });\n        }\n        return defaultPeriods;\n    };\n    /**\n     * Text elements added to while export the chart\n     * It details about the seriesTypes, indicatorTypes and Trendlines selected in chart.\n     *\n     * @param {boolean} isPrint - Specifies whether the export is for printing.\n     * @returns {Element} - The element containing the exported chart details.\n     */\n    ToolBarSelector.prototype.addExportSettings = function (isPrint) {\n        var exportElement = this.stockChart.renderer.createGroup({\n            id: this.stockChart.element.id + '_additionalExport',\n            width: this.stockChart.availableSize.width,\n            fill: this.stockChart.background ? this.stockChart.background : 'transparent'\n        });\n        var titleHeight = measureText(this.stockChart.title, this.stockChart.titleStyle, this.stockChart.themeStyle.chartTitleFont).height;\n        var options = new TextOption(exportElement.id + '_Title', titlePositionX(new Rect(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, 'middle', this.stockChart.title, '', 'text-before-edge');\n        textElement(this.stockChart.renderer, options, this.stockChart.titleStyle, this.stockChart.titleStyle.color || this.stockChart.themeStyle.chartTitleFont.color, exportElement, null, null, null, null, null, null, null, null, null, null, this.stockChart.themeStyle.chartTitleFont);\n        if (isPrint) {\n            return exportElement;\n        }\n        var style = { size: '16px', fontWeight: '600', color: this.stockChart.themeStyle.chartTitleFont.color, fontStyle: 'Normal', fontFamily: this.stockChart.themeStyle.chartTitleFont.fontFamily };\n        var x = measureText('Series: ' + this.selectedSeries, style).width / 2;\n        var y = titleHeight;\n        this.textElementSpan(new TextOption(exportElement.id + '_Series', x, y, 'start', ['Series : ', this.selectedSeries], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n        x += measureText('Series: ' + this.selectedSeries + ' Z', style).width;\n        if (this.selectedIndicator !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_Indicator', x, y, 'start', ['Indicator :', this.selectedIndicator], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n            x += measureText('Indicator: ' + this.selectedIndicator + ' Z', style).width;\n        }\n        if (this.selectedTrendLine !== '') {\n            this.textElementSpan(new TextOption(exportElement.id + '_TrendLine', x, y, 'start', ['Trendline :', this.selectedTrendLine], '', 'text-before-edge'), style, this.stockChart.themeStyle.chartTitleFont.color, exportElement);\n        }\n        return exportElement;\n    };\n    /** @private */\n    ToolBarSelector.prototype.textElementSpan = function (options, font, color, parent, isMinus, redraw, isAnimate, forceAnimate, animateDuration) {\n        if (isMinus === void 0) { isMinus = false; }\n        if (forceAnimate === void 0) { forceAnimate = false; }\n        var renderer = new SvgRenderer('');\n        var renderOptions = {};\n        var tspanElement;\n        renderOptions = {\n            'id': options.id,\n            'font-style': font.fontStyle,\n            'font-family': font.fontFamily,\n            'font-weight': font.fontWeight,\n            'text-anchor': options.anchor,\n            'x': options.x,\n            'y': options.y,\n            'fill': color,\n            'font-size': font.size,\n            'transform': options.transform,\n            'opacity': font.opacity,\n            'dominant-baseline': options.baseLine\n        };\n        var text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n        var htmlObject = renderer.createText(renderOptions, text);\n        if (typeof options.text !== 'string' && options.text.length > 1) {\n            for (var i = 1, len = options.text.length; i < len; i++) {\n                options.text[i] = ' ' + options.text[i];\n                tspanElement = renderer.createTSpan({\n                    'x': options.x + measureText(text, font).width + 5, 'id': options.id,\n                    'y': (options.y), opacity: 0.5\n                }, options.text[i]);\n                htmlObject.appendChild(tspanElement);\n            }\n        }\n        appendChildElement(false, parent, htmlObject, redraw, isAnimate, 'x', 'y', null, null, forceAnimate, false, null, animateDuration);\n        return htmlObject;\n    };\n    return ToolBarSelector;\n}());\nexport { ToolBarSelector };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}