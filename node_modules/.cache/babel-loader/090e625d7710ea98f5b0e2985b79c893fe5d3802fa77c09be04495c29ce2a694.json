{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _react = require(\"react\");\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require(\"prop-types\");\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar _d3Collection = require(\"d3-collection\");\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\nvar _GenericComponent = require(\"../GenericComponent\");\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar ScatterSeries = function (_Component) {\n  _inherits(ScatterSeries, _Component);\n  function ScatterSeries(props) {\n    _classCallCheck(this, ScatterSeries);\n    var _this = _possibleConstructorReturn(this, (ScatterSeries.__proto__ || Object.getPrototypeOf(ScatterSeries)).call(this, props));\n    _this.renderSVG = _this.renderSVG.bind(_this);\n    _this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n    return _this;\n  }\n  _createClass(ScatterSeries, [{\n    key: \"drawOnCanvas\",\n    value: function drawOnCanvas(ctx, moreProps) {\n      var xAccessor = moreProps.xAccessor;\n      var points = helper(this.props, moreProps, xAccessor);\n      _drawOnCanvas(ctx, this.props, points);\n    }\n  }, {\n    key: \"renderSVG\",\n    value: function renderSVG(moreProps) {\n      var _props = this.props,\n        className = _props.className,\n        markerProps = _props.markerProps;\n      var xAccessor = moreProps.xAccessor;\n      var points = helper(this.props, moreProps, xAccessor);\n      return _react2.default.createElement(\"g\", {\n        className: className\n      }, points.map(function (point, idx) {\n        var Marker = point.marker;\n        return _react2.default.createElement(Marker, _extends({\n          key: idx\n        }, markerProps, {\n          point: point\n        }));\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(_GenericChartComponent2.default, {\n        svgDraw: this.renderSVG,\n        canvasDraw: this.drawOnCanvas,\n        canvasToDraw: _GenericComponent.getAxisCanvas,\n        drawOn: [\"pan\"]\n      });\n    }\n  }]);\n  return ScatterSeries;\n}(_react.Component);\nScatterSeries.propTypes = {\n  className: _propTypes2.default.string,\n  yAccessor: _propTypes2.default.func.isRequired,\n  marker: _propTypes2.default.func,\n  markerProvider: _propTypes2.default.func,\n  markerProps: _propTypes2.default.object\n};\nScatterSeries.defaultProps = {\n  className: \"react-stockcharts-scatter\"\n};\nfunction helper(props, moreProps, xAccessor) {\n  var yAccessor = props.yAccessor,\n    markerProvider = props.markerProvider,\n    markerProps = props.markerProps;\n  var Marker = props.marker;\n  var xScale = moreProps.xScale,\n    yScale = moreProps.chartConfig.yScale,\n    plotData = moreProps.plotData;\n  if (!(markerProvider || Marker)) throw new Error(\"required prop, either marker or markerProvider missing\");\n  return plotData.map(function (d) {\n    if (markerProvider) Marker = markerProvider(d);\n    var mProps = _extends({}, Marker.defaultProps, markerProps);\n    var fill = (0, _utils.functor)(mProps.fill);\n    var stroke = (0, _utils.functor)(mProps.stroke);\n    return {\n      x: xScale(xAccessor(d)),\n      y: yScale(yAccessor(d)),\n      fill: (0, _utils.hexToRGBA)(fill(d), mProps.opacity),\n      stroke: stroke(d),\n      datum: d,\n      marker: Marker\n    };\n  });\n}\nfunction _drawOnCanvas(ctx, props, points) {\n  var markerProps = props.markerProps;\n  var nest = (0, _d3Collection.nest)().key(function (d) {\n    return d.fill;\n  }).key(function (d) {\n    return d.stroke;\n  }).entries(points);\n  nest.forEach(function (fillGroup) {\n    var fillKey = fillGroup.key,\n      fillValues = fillGroup.values;\n    if (fillKey !== \"none\") {\n      ctx.fillStyle = fillKey;\n    }\n    fillValues.forEach(function (strokeGroup) {\n      // var { key: strokeKey, values: strokeValues } = strokeGroup;\n      var strokeValues = strokeGroup.values;\n      strokeValues.forEach(function (point) {\n        var marker = point.marker;\n        marker.drawOnCanvas(_extends({}, marker.defaultProps, markerProps, {\n          fill: fillKey\n        }), point, ctx);\n      });\n    });\n  });\n}\nexports.default = ScatterSeries;","map":{"version":3,"names":["_react","require","_propTypes","_d3Collection","_GenericChartComponent","_GenericComponent","_utils","ScatterSeries","props","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","renderSVG","bind","drawOnCanvas","ctx","moreProps","xAccessor","points","helper","_drawOnCanvas","_props","className","markerProps","_react2","default","createElement","map","point","idx","Marker","marker","_extends","key","_GenericChartComponent2","svgDraw","canvasDraw","canvasToDraw","getAxisCanvas","drawOn","propTypes","_propTypes2","string","yAccessor","func","isRequired","markerProvider","object","defaultProps","xScale","yScale","chartConfig","plotData","Error","d","mProps","fill","functor","stroke","x","y","hexToRGBA","opacity","datum","nest","entries","forEach","fillGroup","fillKey","fillValues","values","fillStyle","strokeGroup","strokeValues"],"sources":["C:\\Users\\gabby\\trax-x\\node_modules\\src\\lib\\series\\ScatterSeries.js"],"sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { nest as d3Nest } from \"d3-collection\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nimport { hexToRGBA, functor } from \"../utils\";\n\nclass ScatterSeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { xAccessor } = moreProps;\n\n\t\tconst points = helper(this.props, moreProps, xAccessor);\n\n\t\tdrawOnCanvas(ctx, this.props, points);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { className, markerProps } = this.props;\n\t\tconst { xAccessor } = moreProps;\n\n\t\tconst points = helper(this.props, moreProps, xAccessor);\n\n\t\treturn <g className={className}>\n\t\t\t{points.map((point, idx) => {\n\t\t\t\tconst { marker: Marker } = point;\n\t\t\t\treturn <Marker key={idx} {...markerProps} point={point} />;\n\t\t\t})}\n\t\t</g>;\n\t}\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n}\n\nScatterSeries.propTypes = {\n\tclassName: PropTypes.string,\n\tyAccessor: PropTypes.func.isRequired,\n\tmarker: PropTypes.func,\n\tmarkerProvider: PropTypes.func,\n\tmarkerProps: PropTypes.object,\n};\n\nScatterSeries.defaultProps = {\n\tclassName: \"react-stockcharts-scatter\",\n};\n\nfunction helper(props, moreProps, xAccessor) {\n\tconst { yAccessor, markerProvider, markerProps } = props;\n\tlet { marker: Marker } = props;\n\tconst { xScale, chartConfig: { yScale }, plotData } = moreProps;\n\n\tif (!(markerProvider || Marker)) throw new Error(\"required prop, either marker or markerProvider missing\");\n\n\treturn plotData.map(d => {\n\n\t\tif (markerProvider) Marker = markerProvider(d);\n\n\t\tconst mProps = { ...Marker.defaultProps, ...markerProps };\n\n\t\tconst fill = functor(mProps.fill);\n\t\tconst stroke = functor(mProps.stroke);\n\n\t\treturn {\n\t\t\tx: xScale(xAccessor(d)),\n\t\t\ty: yScale(yAccessor(d)),\n\t\t\tfill: hexToRGBA(fill(d), mProps.opacity),\n\t\t\tstroke: stroke(d),\n\t\t\tdatum: d,\n\t\t\tmarker: Marker,\n\t\t};\n\t});\n}\n\nfunction drawOnCanvas(ctx, props, points) {\n\n\tconst { markerProps } = props;\n\n\tconst nest = d3Nest()\n\t\t.key(d => d.fill)\n\t\t.key(d => d.stroke)\n\t\t.entries(points);\n\n\tnest.forEach(fillGroup => {\n\t\tconst { key: fillKey, values: fillValues } = fillGroup;\n\n\t\tif (fillKey !== \"none\") {\n\t\t\tctx.fillStyle = fillKey;\n\t\t}\n\n\t\tfillValues.forEach(strokeGroup => {\n\t\t\t// var { key: strokeKey, values: strokeValues } = strokeGroup;\n\t\t\tconst { values: strokeValues } = strokeGroup;\n\n\t\t\tstrokeValues.forEach(point => {\n\t\t\t\tconst { marker } = point;\n\t\t\t\tmarker.drawOnCanvas({ ...marker.defaultProps, ...markerProps, fill: fillKey }, point, ctx);\n\t\t\t});\n\t\t});\n\t});\n}\n\nexport default ScatterSeries;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}