{"ast":null,"code":"import { functor } from \"./functor\";\nimport { identity } from \"./identity\";\nexport default function () {\n  let undefinedValue;\n  let windowSize = 10;\n  let accumulator = () => {\n    /** Do Nothing */\n  };\n  let source = identity;\n  let skipInitial = 0;\n  const mappedSlidingWindow = function (data) {\n    // @ts-ignore\n    const size = functor(windowSize).apply(this, arguments);\n    const windowData = [];\n    let accumulatorIdx = 0;\n    const undef = functor(undefinedValue);\n    const result = [];\n    data.forEach(function (d, i) {\n      let mapped;\n      if (i < skipInitial + size - 1) {\n        mapped = undef(d, i);\n        result.push(mapped);\n        windowData.push(mapped);\n        return;\n      }\n      if (i >= skipInitial + size) {\n        windowData.shift();\n      }\n      // @ts-ignore\n      windowData.push(source(d, i));\n      // @ts-ignore\n      mapped = accumulator(windowData, i, accumulatorIdx++);\n      result.push(mapped);\n      windowData.pop();\n      windowData.push(mapped);\n      return;\n    });\n    return result;\n  };\n  mappedSlidingWindow.undefinedValue = function (x) {\n    if (!arguments.length) {\n      return undefinedValue;\n    }\n    undefinedValue = x;\n    return mappedSlidingWindow;\n  };\n  mappedSlidingWindow.windowSize = function (x) {\n    if (!arguments.length) {\n      return windowSize;\n    }\n    windowSize = x;\n    return mappedSlidingWindow;\n  };\n  mappedSlidingWindow.accumulator = function (x) {\n    if (!arguments.length) {\n      return accumulator;\n    }\n    accumulator = x;\n    return mappedSlidingWindow;\n  };\n  mappedSlidingWindow.skipInitial = function (x) {\n    if (!arguments.length) {\n      return skipInitial;\n    }\n    skipInitial = x;\n    return mappedSlidingWindow;\n  };\n  mappedSlidingWindow.source = function (x) {\n    if (!arguments.length) {\n      return source;\n    }\n    source = x;\n    return mappedSlidingWindow;\n  };\n  return mappedSlidingWindow;\n}","map":{"version":3,"names":["functor","identity","undefinedValue","windowSize","accumulator","source","skipInitial","mappedSlidingWindow","data","size","apply","arguments","windowData","accumulatorIdx","undef","result","forEach","d","i","mapped","push","shift","pop","x","length"],"sources":["C:\\Users\\gabby\\trax-x\\node_modules\\@react-financial-charts\\indicators\\src\\utils\\mappedSlidingWindow.ts"],"sourcesContent":["import { functor } from \"./functor\";\nimport { identity } from \"./identity\";\n\ninterface MappedSlidingWindow {\n    (data: any[]): any;\n    accumulator(): any;\n    accumulator(x: any): MappedSlidingWindow;\n    skipInitial(): number;\n    skipInitial(x: number): MappedSlidingWindow;\n    source(): any;\n    source(x: any): MappedSlidingWindow;\n    undefinedValue(): any;\n    undefinedValue(x: any): MappedSlidingWindow;\n    windowSize(): number;\n    windowSize(x: number): MappedSlidingWindow;\n}\n\nexport default function () {\n    let undefinedValue: any;\n    let windowSize = 10;\n    let accumulator = () => {\n        /** Do Nothing */\n    };\n    let source = identity;\n    let skipInitial = 0;\n\n    const mappedSlidingWindow = function (data: any[]) {\n        // @ts-ignore\n        const size = functor(windowSize).apply(this, arguments);\n        const windowData: any[] = [];\n        let accumulatorIdx = 0;\n        const undef = functor(undefinedValue);\n        const result: any[] = [];\n        data.forEach(function (d, i) {\n            let mapped;\n            if (i < skipInitial + size - 1) {\n                mapped = undef(d, i);\n                result.push(mapped);\n                windowData.push(mapped);\n                return;\n            }\n            if (i >= skipInitial + size) {\n                windowData.shift();\n            }\n            // @ts-ignore\n            windowData.push(source(d, i));\n\n            // @ts-ignore\n            mapped = accumulator(windowData, i, accumulatorIdx++);\n            result.push(mapped);\n            windowData.pop();\n            windowData.push(mapped);\n            return;\n        });\n        return result;\n    };\n\n    mappedSlidingWindow.undefinedValue = function (x: any) {\n        if (!arguments.length) {\n            return undefinedValue;\n        }\n        undefinedValue = x;\n        return mappedSlidingWindow;\n    };\n    mappedSlidingWindow.windowSize = function (x: number) {\n        if (!arguments.length) {\n            return windowSize;\n        }\n        windowSize = x;\n        return mappedSlidingWindow;\n    };\n    mappedSlidingWindow.accumulator = function (x: any) {\n        if (!arguments.length) {\n            return accumulator;\n        }\n        accumulator = x;\n        return mappedSlidingWindow;\n    };\n    mappedSlidingWindow.skipInitial = function (x: number) {\n        if (!arguments.length) {\n            return skipInitial;\n        }\n        skipInitial = x;\n        return mappedSlidingWindow;\n    };\n    mappedSlidingWindow.source = function (x: any) {\n        if (!arguments.length) {\n            return source;\n        }\n        source = x;\n        return mappedSlidingWindow;\n    };\n\n    return mappedSlidingWindow as MappedSlidingWindow;\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,WAAW;AACnC,SAASC,QAAQ,QAAQ,YAAY;AAgBrC,eAAc;EACV,IAAIC,cAAmB;EACvB,IAAIC,UAAU,GAAG,EAAE;EACnB,IAAIC,WAAW,GAAGA,CAAA,KAAK;IACnB;EAAA,CACH;EACD,IAAIC,MAAM,GAAGJ,QAAQ;EACrB,IAAIK,WAAW,GAAG,CAAC;EAEnB,MAAMC,mBAAmB,GAAG,SAAAA,CAAUC,IAAW;IAC7C;IACA,MAAMC,IAAI,GAAGT,OAAO,CAACG,UAAU,CAAC,CAACO,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IACvD,MAAMC,UAAU,GAAU,EAAE;IAC5B,IAAIC,cAAc,GAAG,CAAC;IACtB,MAAMC,KAAK,GAAGd,OAAO,CAACE,cAAc,CAAC;IACrC,MAAMa,MAAM,GAAU,EAAE;IACxBP,IAAI,CAACQ,OAAO,CAAC,UAAUC,CAAC,EAAEC,CAAC;MACvB,IAAIC,MAAM;MACV,IAAID,CAAC,GAAGZ,WAAW,GAAGG,IAAI,GAAG,CAAC,EAAE;QAC5BU,MAAM,GAAGL,KAAK,CAACG,CAAC,EAAEC,CAAC,CAAC;QACpBH,MAAM,CAACK,IAAI,CAACD,MAAM,CAAC;QACnBP,UAAU,CAACQ,IAAI,CAACD,MAAM,CAAC;QACvB;;MAEJ,IAAID,CAAC,IAAIZ,WAAW,GAAGG,IAAI,EAAE;QACzBG,UAAU,CAACS,KAAK,EAAE;;MAEtB;MACAT,UAAU,CAACQ,IAAI,CAACf,MAAM,CAACY,CAAC,EAAEC,CAAC,CAAC,CAAC;MAE7B;MACAC,MAAM,GAAGf,WAAW,CAACQ,UAAU,EAAEM,CAAC,EAAEL,cAAc,EAAE,CAAC;MACrDE,MAAM,CAACK,IAAI,CAACD,MAAM,CAAC;MACnBP,UAAU,CAACU,GAAG,EAAE;MAChBV,UAAU,CAACQ,IAAI,CAACD,MAAM,CAAC;MACvB;IACJ,CAAC,CAAC;IACF,OAAOJ,MAAM;EACjB,CAAC;EAEDR,mBAAmB,CAACL,cAAc,GAAG,UAAUqB,CAAM;IACjD,IAAI,CAACZ,SAAS,CAACa,MAAM,EAAE;MACnB,OAAOtB,cAAc;;IAEzBA,cAAc,GAAGqB,CAAC;IAClB,OAAOhB,mBAAmB;EAC9B,CAAC;EACDA,mBAAmB,CAACJ,UAAU,GAAG,UAAUoB,CAAS;IAChD,IAAI,CAACZ,SAAS,CAACa,MAAM,EAAE;MACnB,OAAOrB,UAAU;;IAErBA,UAAU,GAAGoB,CAAC;IACd,OAAOhB,mBAAmB;EAC9B,CAAC;EACDA,mBAAmB,CAACH,WAAW,GAAG,UAAUmB,CAAM;IAC9C,IAAI,CAACZ,SAAS,CAACa,MAAM,EAAE;MACnB,OAAOpB,WAAW;;IAEtBA,WAAW,GAAGmB,CAAC;IACf,OAAOhB,mBAAmB;EAC9B,CAAC;EACDA,mBAAmB,CAACD,WAAW,GAAG,UAAUiB,CAAS;IACjD,IAAI,CAACZ,SAAS,CAACa,MAAM,EAAE;MACnB,OAAOlB,WAAW;;IAEtBA,WAAW,GAAGiB,CAAC;IACf,OAAOhB,mBAAmB;EAC9B,CAAC;EACDA,mBAAmB,CAACF,MAAM,GAAG,UAAUkB,CAAM;IACzC,IAAI,CAACZ,SAAS,CAACa,MAAM,EAAE;MACnB,OAAOnB,MAAM;;IAEjBA,MAAM,GAAGkB,CAAC;IACV,OAAOhB,mBAAmB;EAC9B,CAAC;EAED,OAAOA,mBAA0C;AACrD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}