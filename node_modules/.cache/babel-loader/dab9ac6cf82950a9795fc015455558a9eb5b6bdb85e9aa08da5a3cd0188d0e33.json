{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nimport React from \"react\";\nimport { extent } from \"d3-array\";\nimport { set } from \"d3-collection\";\nimport flattenDeep from \"lodash.flattendeep\";\nimport Chart from \"../Chart\";\nimport { last, isObject, getClosestItem, zipper, isDefined, isNotDefined, functor, mapObject, find, shallowEqual } from \"./index\";\nexport function getChartOrigin(origin, contextWidth, contextHeight) {\n  var originCoordinates = typeof origin === \"function\" ? origin(contextWidth, contextHeight) : origin;\n  return originCoordinates;\n}\nexport function getDimensions(_ref, chartProps) {\n  var width = _ref.width,\n    height = _ref.height;\n  var chartHeight = chartProps.height || height;\n  return {\n    availableHeight: height,\n    width: width,\n    height: chartHeight\n  };\n}\nfunction values(func) {\n  return function (d) {\n    var obj = func(d);\n    if (isObject(obj)) {\n      return mapObject(obj);\n    }\n    return obj;\n  };\n}\nfunction isArraySize2AndNumber(yExtentsProp) {\n  if (Array.isArray(yExtentsProp) && yExtentsProp.length === 2) {\n    var _yExtentsProp = _slicedToArray(yExtentsProp, 2),\n      a = _yExtentsProp[0],\n      b = _yExtentsProp[1];\n    return typeof a == \"number\" && typeof b == \"number\";\n  }\n  return false;\n}\nexport function getNewChartConfig(innerDimension, children) {\n  var existingChartConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  return React.Children.map(children, function (each) {\n    if (each && each.type.toString() === Chart.toString()) {\n      var chartProps = _extends({}, Chart.defaultProps, each.props);\n      var id = chartProps.id,\n        origin = chartProps.origin,\n        padding = chartProps.padding,\n        yExtentsProp = chartProps.yExtents,\n        yScaleProp = chartProps.yScale,\n        flipYScale = chartProps.flipYScale,\n        yExtentsCalculator = chartProps.yExtentsCalculator;\n      var yScale = yScaleProp.copy();\n      var _getDimensions = getDimensions(innerDimension, chartProps),\n        width = _getDimensions.width,\n        height = _getDimensions.height,\n        availableHeight = _getDimensions.availableHeight;\n      var yPan = chartProps.yPan;\n      var yPanEnabled = chartProps.yPanEnabled;\n      // var { yMousePointerRectWidth: rectWidth, yMousePointerRectHeight: rectHeight, yMousePointerArrowWidth: arrowWidth } = each.props;\n      // var mouseCoordinates = { at, yDisplayFormat, rectHeight, rectWidth, arrowWidth };\n\n      var yExtents = isDefined(yExtentsProp) ? (Array.isArray(yExtentsProp) ? yExtentsProp : [yExtentsProp]).map(functor) : undefined;\n      var prevChartConfig = find(existingChartConfig, function (d) {\n        return d.id === id;\n      });\n      if (isArraySize2AndNumber(yExtentsProp)) {\n        if (isDefined(prevChartConfig) && prevChartConfig.yPan && prevChartConfig.yPanEnabled && yPan && yPanEnabled && shallowEqual(prevChartConfig.originalYExtentsProp, yExtentsProp)) {\n          // console.log(prevChartConfig.originalYExtentsProp, yExtentsProp)\n          // console.log(prevChartConfig.yScale.domain())\n          yScale.domain(prevChartConfig.yScale.domain());\n        } else {\n          var _yExtentsProp2 = _slicedToArray(yExtentsProp, 2),\n            a = _yExtentsProp2[0],\n            b = _yExtentsProp2[1];\n          yScale.domain([a, b]);\n        }\n      } else if (isDefined(prevChartConfig) && prevChartConfig.yPanEnabled) {\n        if (isArraySize2AndNumber(prevChartConfig.originalYExtentsProp)) {\n          // do nothing\n        } else {\n          yScale.domain(prevChartConfig.yScale.domain());\n          yPanEnabled = true;\n        }\n      }\n      return {\n        id: id,\n        origin: functor(origin)(width, availableHeight),\n        padding: padding,\n        originalYExtentsProp: yExtentsProp,\n        yExtents: yExtents,\n        yExtentsCalculator: yExtentsCalculator,\n        flipYScale: flipYScale,\n        // yScale: setRange(yScale.copy(), height, padding, flipYScale),\n        yScale: yScale,\n        yPan: yPan,\n        yPanEnabled: yPanEnabled,\n        // mouseCoordinates,\n        width: width,\n        height: height\n      };\n    }\n    return undefined;\n  }).filter(function (each) {\n    return isDefined(each);\n  });\n}\nexport function getCurrentCharts(chartConfig, mouseXY) {\n  var currentCharts = chartConfig.filter(function (eachConfig) {\n    var top = eachConfig.origin[1];\n    var bottom = top + eachConfig.height;\n    return mouseXY[1] > top && mouseXY[1] < bottom;\n  }).map(function (config) {\n    return config.id;\n  });\n  return currentCharts;\n}\nfunction setRange(scale, height, padding, flipYScale) {\n  if (scale.rangeRoundPoints || isNotDefined(scale.invert)) {\n    if (isNaN(padding)) throw new Error(\"padding has to be a number for ordinal scale\");\n    if (scale.rangeRoundPoints) scale.rangeRoundPoints(flipYScale ? [0, height] : [height, 0], padding);\n    if (scale.rangeRound) scale.range(flipYScale ? [0, height] : [height, 0]).padding(padding);\n  } else {\n    var _ref2 = isNaN(padding) ? padding : {\n        top: padding,\n        bottom: padding\n      },\n      top = _ref2.top,\n      bottom = _ref2.bottom;\n    scale.range(flipYScale ? [top, height - bottom] : [height - bottom, top]);\n  }\n  return scale;\n}\nfunction yDomainFromYExtents(yExtents, yScale, plotData) {\n  var yValues = yExtents.map(function (eachExtent) {\n    return plotData.map(values(eachExtent));\n  });\n  var allYValues = flattenDeep(yValues);\n  // console.log(allYValues)\n  var realYDomain = yScale.invert ? extent(allYValues) : set(allYValues).values();\n  return realYDomain;\n}\nexport function getChartConfigWithUpdatedYScales(chartConfig, _ref3, xDomain, dy, chartsToPan) {\n  var plotData = _ref3.plotData,\n    xAccessor = _ref3.xAccessor,\n    displayXAccessor = _ref3.displayXAccessor,\n    fullData = _ref3.fullData;\n  var yDomains = chartConfig.map(function (_ref4) {\n    var yExtentsCalculator = _ref4.yExtentsCalculator,\n      yExtents = _ref4.yExtents,\n      yScale = _ref4.yScale;\n    var realYDomain = isDefined(yExtentsCalculator) ? yExtentsCalculator({\n      plotData: plotData,\n      xDomain: xDomain,\n      xAccessor: xAccessor,\n      displayXAccessor: displayXAccessor,\n      fullData: fullData\n    }) : yDomainFromYExtents(yExtents, yScale, plotData);\n\n    // console.log(\"yScale.domain() ->\", yScale.domain())\n\n    var yDomainDY = isDefined(dy) ? yScale.range().map(function (each) {\n      return each - dy;\n    }).map(yScale.invert) : yScale.domain();\n    return {\n      realYDomain: realYDomain,\n      yDomainDY: yDomainDY,\n      prevYDomain: yScale.domain()\n    };\n  });\n  var combine = zipper().combine(function (config, _ref5) {\n    var realYDomain = _ref5.realYDomain,\n      yDomainDY = _ref5.yDomainDY,\n      prevYDomain = _ref5.prevYDomain;\n    var id = config.id,\n      padding = config.padding,\n      height = config.height,\n      yScale = config.yScale,\n      yPan = config.yPan,\n      flipYScale = config.flipYScale,\n      _config$yPanEnabled = config.yPanEnabled,\n      yPanEnabled = _config$yPanEnabled === undefined ? false : _config$yPanEnabled;\n    var another = isDefined(chartsToPan) ? chartsToPan.indexOf(id) > -1 : true;\n    var domain = yPan && yPanEnabled ? another ? yDomainDY : prevYDomain : realYDomain;\n\n    // console.log(id, yPan, yPanEnabled, another);\n    // console.log(domain, realYDomain, prevYDomain);\n    var newYScale = setRange(yScale.copy().domain(domain), height, padding, flipYScale);\n    return _extends({}, config, {\n      yScale: newYScale,\n      realYDomain: realYDomain\n    });\n    // return { ...config, yScale: yScale.copy().domain(domain).range([height - padding, padding]) };\n  });\n  var updatedChartConfig = combine(chartConfig, yDomains);\n  // console.error(yDomains, dy, chartsToPan, updatedChartConfig.map(d => d.yScale.domain()));\n  // console.log(updatedChartConfig.map(d => ({ id: d.id, domain: d.yScale.domain() })))\n\n  return updatedChartConfig;\n}\nexport function getCurrentItem(xScale, xAccessor, mouseXY, plotData) {\n  var xValue = void 0,\n    item = void 0;\n  if (xScale.invert) {\n    xValue = xScale.invert(mouseXY[0]);\n    item = getClosestItem(plotData, xValue, xAccessor);\n  } else {\n    var d = xScale.range().map(function (d, idx) {\n      return {\n        x: Math.abs(d - mouseXY[0]),\n        idx: idx\n      };\n    }).reduce(function (a, b) {\n      return a.x < b.x ? a : b;\n    });\n    item = isDefined(d) ? plotData[d.idx] : plotData[0];\n    // console.log(d, item);\n  }\n  return item;\n}\nexport function getXValue(xScale, xAccessor, mouseXY, plotData) {\n  var xValue = void 0,\n    item = void 0;\n  if (xScale.invert) {\n    xValue = xScale.invert(mouseXY[0]);\n    if (xValue > xAccessor(last(plotData)) && xScale.value) {\n      return Math.round(xValue);\n    } else {\n      item = getClosestItem(plotData, xValue, xAccessor);\n    }\n  } else {\n    var d = xScale.range().map(function (d, idx) {\n      return {\n        x: Math.abs(d - mouseXY[0]),\n        idx: idx\n      };\n    }).reduce(function (a, b) {\n      return a.x < b.x ? a : b;\n    });\n    item = isDefined(d) ? plotData[d.idx] : plotData[0];\n    // console.log(d, item);\n  }\n  return xAccessor(item);\n}","map":{"version":3,"names":["React","extent","set","flattenDeep","Chart","last","isObject","getClosestItem","zipper","isDefined","isNotDefined","functor","mapObject","find","shallowEqual","getChartOrigin","origin","contextWidth","contextHeight","originCoordinates","getDimensions","_ref","chartProps","width","height","chartHeight","availableHeight","values","func","d","obj","isArraySize2AndNumber","yExtentsProp","Array","isArray","length","_yExtentsProp","_slicedToArray","a","b","getNewChartConfig","innerDimension","children","existingChartConfig","arguments","undefined","Children","map","each","type","toString","_extends","defaultProps","props","id","padding","yExtents","yScaleProp","yScale","flipYScale","yExtentsCalculator","copy","_getDimensions","yPan","yPanEnabled","prevChartConfig","originalYExtentsProp","domain","_yExtentsProp2","filter","getCurrentCharts","chartConfig","mouseXY","currentCharts","eachConfig","top","bottom","config","setRange","scale","rangeRoundPoints","invert","isNaN","Error","rangeRound","range","_ref2","yDomainFromYExtents","plotData","yValues","eachExtent","allYValues","realYDomain","getChartConfigWithUpdatedYScales","_ref3","xDomain","dy","chartsToPan","xAccessor","displayXAccessor","fullData","yDomains","_ref4","yDomainDY","prevYDomain","combine","_ref5","_config$yPanEnabled","another","indexOf","newYScale","updatedChartConfig","getCurrentItem","xScale","xValue","item","idx","x","Math","abs","reduce","getXValue","value","round"],"sources":["C:\\Users\\gabby\\trax-x\\node_modules\\src\\lib\\utils\\ChartDataUtil.js"],"sourcesContent":["\n\nimport React from \"react\";\nimport { extent } from \"d3-array\";\nimport { set } from \"d3-collection\";\nimport flattenDeep from \"lodash.flattendeep\";\n\nimport Chart from \"../Chart\";\n\nimport {\n\tlast,\n\tisObject,\n\tgetClosestItem,\n\tzipper,\n\tisDefined,\n\tisNotDefined,\n\tfunctor,\n\tmapObject,\n\tfind,\n\tshallowEqual\n} from \"./index\";\n\nexport function getChartOrigin(origin, contextWidth, contextHeight) {\n\tconst originCoordinates = typeof origin === \"function\"\n\t\t? origin(contextWidth, contextHeight)\n\t\t: origin;\n\treturn originCoordinates;\n}\n\nexport function getDimensions({ width, height }, chartProps) {\n\n\tconst chartHeight = (chartProps.height || height);\n\n\treturn {\n\t\tavailableHeight: height,\n\t\twidth,\n\t\theight: chartHeight\n\t};\n}\n\nfunction values(func) {\n\treturn (d) => {\n\t\tconst obj = func(d);\n\t\tif (isObject(obj)) {\n\t\t\treturn mapObject(obj);\n\t\t}\n\t\treturn obj;\n\t};\n}\n\nfunction isArraySize2AndNumber(yExtentsProp) {\n\tif (Array.isArray(yExtentsProp) && yExtentsProp.length === 2) {\n\t\tconst [a, b] = yExtentsProp;\n\t\treturn (typeof a == \"number\" && typeof b == \"number\");\n\t}\n\treturn false;\n}\n\nexport function getNewChartConfig(innerDimension, children, existingChartConfig = []) {\n\treturn React.Children.map(children, (each) => {\n\t\tif (each && each.type.toString() === Chart.toString()) {\n\t\t\tconst chartProps = {\n\t\t\t\t...Chart.defaultProps,\n\t\t\t\t...each.props\n\t\t\t};\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\torigin,\n\t\t\t\tpadding,\n\t\t\t\tyExtents: yExtentsProp,\n\t\t\t\tyScale: yScaleProp,\n\t\t\t\tflipYScale,\n\t\t\t\tyExtentsCalculator\n\t\t\t} = chartProps;\n\n\t\t\tconst yScale = yScaleProp.copy();\n\t\t\tconst {\n\t\t\t\twidth, height, availableHeight\n\t\t\t} = getDimensions(innerDimension, chartProps);\n\n\t\t\tconst { yPan } = chartProps;\n\t\t\tlet { yPanEnabled } = chartProps;\n\t\t\t// var { yMousePointerRectWidth: rectWidth, yMousePointerRectHeight: rectHeight, yMousePointerArrowWidth: arrowWidth } = each.props;\n\t\t\t// var mouseCoordinates = { at, yDisplayFormat, rectHeight, rectWidth, arrowWidth };\n\t\t\tconst yExtents = isDefined(yExtentsProp)\n\t\t\t\t? (Array.isArray(yExtentsProp) ? yExtentsProp : [yExtentsProp]).map(functor)\n\t\t\t\t: undefined;\n\n\t\t\tconst prevChartConfig = find(existingChartConfig, d => d.id === id);\n\n\t\t\tif (isArraySize2AndNumber(yExtentsProp)) {\n\t\t\t\tif (\n\t\t\t\t\tisDefined(prevChartConfig)\n\t\t\t\t\t&& prevChartConfig.yPan\n\t\t\t\t\t&& prevChartConfig.yPanEnabled\n\t\t\t\t\t&& yPan\n\t\t\t\t\t&& yPanEnabled\n\t\t\t\t\t&& shallowEqual(prevChartConfig.originalYExtentsProp, yExtentsProp)\n\t\t\t\t) {\n\t\t\t\t\t// console.log(prevChartConfig.originalYExtentsProp, yExtentsProp)\n\t\t\t\t\t// console.log(prevChartConfig.yScale.domain())\n\t\t\t\t\tyScale.domain(prevChartConfig.yScale.domain());\n\t\t\t\t} else {\n\t\t\t\t\tconst [a, b] = yExtentsProp;\n\t\t\t\t\tyScale.domain([a, b]);\n\t\t\t\t}\n\t\t\t} else if (isDefined(prevChartConfig) && prevChartConfig.yPanEnabled) {\n\t\t\t\tif (isArraySize2AndNumber(prevChartConfig.originalYExtentsProp)) {\n\t\t\t\t\t// do nothing\n\t\t\t\t} else {\n\t\t\t\t\tyScale.domain(prevChartConfig.yScale.domain());\n\t\t\t\t\tyPanEnabled = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\torigin: functor(origin)(width, availableHeight),\n\t\t\t\tpadding,\n\t\t\t\toriginalYExtentsProp: yExtentsProp,\n\t\t\t\tyExtents,\n\t\t\t\tyExtentsCalculator,\n\t\t\t\tflipYScale,\n\t\t\t\t// yScale: setRange(yScale.copy(), height, padding, flipYScale),\n\t\t\t\tyScale: yScale,\n\t\t\t\tyPan,\n\t\t\t\tyPanEnabled,\n\t\t\t\t// mouseCoordinates,\n\t\t\t\twidth,\n\t\t\t\theight\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}).filter(each => isDefined(each));\n}\nexport function getCurrentCharts(chartConfig, mouseXY) {\n\tconst currentCharts = chartConfig.filter(eachConfig => {\n\t\tconst top = eachConfig.origin[1];\n\t\tconst bottom = top + eachConfig.height;\n\t\treturn (mouseXY[1] > top && mouseXY[1] < bottom);\n\t}).map(config => config.id);\n\n\treturn currentCharts;\n}\n\nfunction setRange(scale, height, padding, flipYScale) {\n\tif (scale.rangeRoundPoints || isNotDefined(scale.invert)) {\n\t\tif (isNaN(padding)) throw new Error(\"padding has to be a number for ordinal scale\");\n\t\tif (scale.rangeRoundPoints) scale.rangeRoundPoints(flipYScale ? [0, height] : [height, 0], padding);\n\t\tif (scale.rangeRound) scale.range(flipYScale ? [0, height] : [height, 0]).padding(padding);\n\t} else {\n\t\tconst { top, bottom } = isNaN(padding)\n\t\t\t? padding\n\t\t\t: { top: padding, bottom: padding };\n\n\t\tscale.range(flipYScale ? [top, height - bottom] : [height - bottom, top]);\n\t}\n\treturn scale;\n}\n\nfunction yDomainFromYExtents(yExtents, yScale, plotData) {\n\tconst yValues = yExtents.map(eachExtent =>\n\t\tplotData.map(values(eachExtent)));\n\n\tconst allYValues = flattenDeep(yValues);\n\t// console.log(allYValues)\n\tconst realYDomain = (yScale.invert)\n\t\t? extent(allYValues)\n\t\t: set(allYValues).values();\n\n\treturn realYDomain;\n}\n\n\nexport function getChartConfigWithUpdatedYScales(\n\tchartConfig,\n\t{ plotData, xAccessor, displayXAccessor, fullData },\n\txDomain,\n\tdy,\n\tchartsToPan\n) {\n\tconst yDomains = chartConfig\n\t\t.map(({ yExtentsCalculator, yExtents, yScale }) => {\n\n\t\t\tconst realYDomain = isDefined(yExtentsCalculator)\n\t\t\t\t? yExtentsCalculator({ plotData, xDomain, xAccessor, displayXAccessor, fullData })\n\t\t\t\t: yDomainFromYExtents(yExtents, yScale, plotData);\n\n\t\t\t// console.log(\"yScale.domain() ->\", yScale.domain())\n\n\t\t\tconst yDomainDY = isDefined(dy)\n\t\t\t\t? yScale.range().map(each => each - dy).map(yScale.invert)\n\t\t\t\t: yScale.domain();\n\t\t\treturn {\n\t\t\t\trealYDomain,\n\t\t\t\tyDomainDY,\n\t\t\t\tprevYDomain: yScale.domain(),\n\t\t\t};\n\t\t});\n\n\tconst combine = zipper()\n\t\t.combine((config, { realYDomain, yDomainDY, prevYDomain }) => {\n\t\t\tconst { id, padding, height, yScale, yPan, flipYScale, yPanEnabled = false } = config;\n\n\t\t\tconst another = isDefined(chartsToPan)\n\t\t\t\t? chartsToPan.indexOf(id) > -1\n\t\t\t\t: true;\n\t\t\tconst domain = yPan && yPanEnabled\n\t\t\t\t? another ? yDomainDY : prevYDomain\n\t\t\t\t: realYDomain;\n\n\t\t\t// console.log(id, yPan, yPanEnabled, another);\n\t\t\t// console.log(domain, realYDomain, prevYDomain);\n\t\t\tconst newYScale = setRange(\n\t\t\t\tyScale.copy().domain(domain), height, padding, flipYScale\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...config,\n\t\t\t\tyScale: newYScale,\n\t\t\t\trealYDomain: realYDomain,\n\t\t\t};\n\t\t\t// return { ...config, yScale: yScale.copy().domain(domain).range([height - padding, padding]) };\n\t\t});\n\n\tconst updatedChartConfig = combine(chartConfig, yDomains);\n\t// console.error(yDomains, dy, chartsToPan, updatedChartConfig.map(d => d.yScale.domain()));\n\t// console.log(updatedChartConfig.map(d => ({ id: d.id, domain: d.yScale.domain() })))\n\n\treturn updatedChartConfig;\n}\n\nexport function getCurrentItem(xScale, xAccessor, mouseXY, plotData) {\n\tlet xValue, item;\n\tif (xScale.invert) {\n\t\txValue = xScale.invert(mouseXY[0]);\n\t\titem = getClosestItem(plotData, xValue, xAccessor);\n\t} else {\n\t\tconst d = xScale.range().map((d, idx) => ({ x: Math.abs(d - mouseXY[0]), idx })).reduce((a, b) => a.x < b.x ? a : b);\n\t\titem = isDefined(d) ? plotData[d.idx] : plotData[0];\n\t\t// console.log(d, item);\n\t}\n\treturn item;\n}\n\nexport function getXValue(xScale, xAccessor, mouseXY, plotData) {\n\n\tlet xValue, item;\n\tif (xScale.invert) {\n\t\txValue = xScale.invert(mouseXY[0]);\n\t\tif (xValue > xAccessor(last(plotData)) && xScale.value) {\n\t\t\treturn Math.round(xValue);\n\t\t} else {\n\t\t\titem = getClosestItem(plotData, xValue, xAccessor);\n\t\t}\n\t} else {\n\t\tconst d = xScale.range().map((d, idx) => ({ x: Math.abs(d - mouseXY[0]), idx })).reduce((a, b) => a.x < b.x ? a : b);\n\t\titem = isDefined(d) ? plotData[d.idx] : plotData[0];\n\t\t// console.log(d, item);\n\t}\n\treturn xAccessor(item);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,GAAT,QAAoB,eAApB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AAEA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,SACCC,IADD,EAECC,QAFD,EAGCC,cAHD,EAICC,MAJD,EAKCC,SALD,EAMCC,YAND,EAOCC,OAPD,EAQCC,SARD,EASCC,IATD,EAUCC,YAVD,QAWO,SAXP;AAaA,OAAO,SAASC,cAATA,CAAwBC,MAAxB,EAAgCC,YAAhC,EAA8CC,aAA9C,EAA6D;EACnE,IAAMC,iBAAA,GAAoB,OAAOH,MAAP,KAAkB,UAAlB,GACvBA,MAAA,CAAOC,YAAP,EAAqBC,aAArB,CADuB,GAEvBF,MAFH;EAGA,OAAOG,iBAAP;AACA;AAED,OAAO,SAASC,aAATA,CAAAC,IAAA,EAA0CC,UAA1C,EAAsD;EAAA,IAA7BC,KAA6B,GAAAF,IAAA,CAA7BE,KAA6B;IAAtBC,MAAsB,GAAAH,IAAA,CAAtBG,MAAsB;EAE5D,IAAMC,WAAA,GAAeH,UAAA,CAAWE,MAAX,IAAqBA,MAA1C;EAEA,OAAO;IACNE,eAAA,EAAiBF,MADX;IAEND,KAAA,EAAAA,KAFM;IAGNC,MAAA,EAAQC;EAHF,CAAP;AAKA;AAED,SAASE,MAATA,CAAgBC,IAAhB,EAAsB;EACrB,OAAO,UAACC,CAAD,EAAO;IACb,IAAMC,GAAA,GAAMF,IAAA,CAAKC,CAAL,CAAZ;IACA,IAAIvB,QAAA,CAASwB,GAAT,CAAJ,EAAmB;MAClB,OAAOlB,SAAA,CAAUkB,GAAV,CAAP;IACA;IACD,OAAOA,GAAP;EACA,CAND;AAOA;AAED,SAASC,qBAATA,CAA+BC,YAA/B,EAA6C;EAC5C,IAAIC,KAAA,CAAMC,OAAN,CAAcF,YAAd,KAA+BA,YAAA,CAAaG,MAAb,KAAwB,CAA3D,EAA8D;IAAA,IAAAC,aAAA,GAAAC,cAAA,CAC9CL,YAD8C;MACtDM,CADsD,GAAAF,aAAA;MACnDG,CADmD,GAAAH,aAAA;IAE7D,OAAQ,OAAOE,CAAP,IAAY,QAAZ,IAAwB,OAAOC,CAAP,IAAY,QAA5C;EACA;EACD,OAAO,KAAP;AACA;AAED,OAAO,SAASC,iBAATA,CAA2BC,cAA3B,EAA2CC,QAA3C,EAA+E;EAAA,IAA1BC,mBAA0B,GAAAC,SAAA,CAAAT,MAAA,QAAAS,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAJ,EAAI;EACrF,OAAO5C,KAAA,CAAM8C,QAAN,CAAeC,GAAf,CAAmBL,QAAnB,EAA6B,UAACM,IAAD,EAAU;IAC7C,IAAIA,IAAA,IAAQA,IAAA,CAAKC,IAAL,CAAUC,QAAV,OAAyB9C,KAAA,CAAM8C,QAAN,EAArC,EAAuD;MACtD,IAAM5B,UAAA,GAAA6B,QAAA,KACF/C,KAAA,CAAMgD,YADJ,EAEFJ,IAAA,CAAKK,KAFH,CAAN;MADsD,IAMrDC,EANqD,GAalDhC,UAbkD,CAMrDgC,EANqD;QAOrDtC,MAPqD,GAalDM,UAbkD,CAOrDN,MAPqD;QAQrDuC,OARqD,GAalDjC,UAbkD,CAQrDiC,OARqD;QAS3CvB,YAT2C,GAalDV,UAbkD,CASrDkC,QATqD;QAU7CC,UAV6C,GAalDnC,UAbkD,CAUrDoC,MAVqD;QAWrDC,UAXqD,GAalDrC,UAbkD,CAWrDqC,UAXqD;QAYrDC,kBAZqD,GAalDtC,UAbkD,CAYrDsC,kBAZqD;MAetD,IAAMF,MAAA,GAASD,UAAA,CAAWI,IAAX,EAAf;MAfsD,IAAAC,cAAA,GAkBlD1C,aAAA,CAAcqB,cAAd,EAA8BnB,UAA9B,CAlBkD;QAiBrDC,KAjBqD,GAAAuC,cAAA,CAiBrDvC,KAjBqD;QAiB9CC,MAjB8C,GAAAsC,cAAA,CAiB9CtC,MAjB8C;QAiBtCE,eAjBsC,GAAAoC,cAAA,CAiBtCpC,eAjBsC;MAAA,IAoB9CqC,IApB8C,GAoBrCzC,UApBqC,CAoB9CyC,IApB8C;MAAA,IAqBhDC,WArBgD,GAqBhC1C,UArBgC,CAqBhD0C,WArBgD;MAsBtD;MACA;;MACA,IAAMR,QAAA,GAAW/C,SAAA,CAAUuB,YAAV,IACd,CAACC,KAAA,CAAMC,OAAN,CAAcF,YAAd,IAA8BA,YAA9B,GAA6C,CAACA,YAAD,CAA9C,EAA8De,GAA9D,CAAkEpC,OAAlE,CADc,GAEdkC,SAFH;MAIA,IAAMoB,eAAA,GAAkBpD,IAAA,CAAK8B,mBAAL,EAA0B,UAAAd,CAAA;QAAA,OAAKA,CAAA,CAAEyB,EAAF,KAASA,EAAd;MAAA,CAA1B,CAAxB;MAEA,IAAIvB,qBAAA,CAAsBC,YAAtB,CAAJ,EAAyC;QACxC,IACCvB,SAAA,CAAUwD,eAAV,KACGA,eAAA,CAAgBF,IADnB,IAEGE,eAAA,CAAgBD,WAFnB,IAGGD,IAHH,IAIGC,WAJH,IAKGlD,YAAA,CAAamD,eAAA,CAAgBC,oBAA7B,EAAmDlC,YAAnD,CANJ,EAOE;UACD;UACA;UACA0B,MAAA,CAAOS,MAAP,CAAcF,eAAA,CAAgBP,MAAhB,CAAuBS,MAAvB,EAAd;QACA,CAXD,MAWO;UAAA,IAAAC,cAAA,GAAA/B,cAAA,CACSL,YADT;YACCM,CADD,GAAA8B,cAAA;YACI7B,CADJ,GAAA6B,cAAA;UAENV,MAAA,CAAOS,MAAP,CAAc,CAAC7B,CAAD,EAAIC,CAAJ,CAAd;QACA;MACD,CAhBD,MAgBO,IAAI9B,SAAA,CAAUwD,eAAV,KAA8BA,eAAA,CAAgBD,WAAlD,EAA+D;QACrE,IAAIjC,qBAAA,CAAsBkC,eAAA,CAAgBC,oBAAtC,CAAJ,EAAiE;UAChE;QAAA,CADD,MAEO;UACNR,MAAA,CAAOS,MAAP,CAAcF,eAAA,CAAgBP,MAAhB,CAAuBS,MAAvB,EAAd;UACAH,WAAA,GAAc,IAAd;QACA;MACD;MAED,OAAO;QACNV,EAAA,EAAAA,EADM;QAENtC,MAAA,EAAQL,OAAA,CAAQK,MAAR,EAAgBO,KAAhB,EAAuBG,eAAvB,CAFF;QAGN6B,OAAA,EAAAA,OAHM;QAINW,oBAAA,EAAsBlC,YAJhB;QAKNwB,QAAA,EAAAA,QALM;QAMNI,kBAAA,EAAAA,kBANM;QAOND,UAAA,EAAAA,UAPM;QAQN;QACAD,MAAA,EAAQA,MATF;QAUNK,IAAA,EAAAA,IAVM;QAWNC,WAAA,EAAAA,WAXM;QAYN;QACAzC,KAAA,EAAAA,KAbM;QAcNC,MAAA,EAAAA;MAdM,CAAP;IAgBA;IACD,OAAOqB,SAAP;EACA,CA1EM,EA0EJwB,MA1EI,CA0EG,UAAArB,IAAA;IAAA,OAAQvC,SAAA,CAAUuC,IAAV,CAAR;EAAA,CA1EH,CAAP;AA2EA;AACD,OAAO,SAASsB,gBAATA,CAA0BC,WAA1B,EAAuCC,OAAvC,EAAgD;EACtD,IAAMC,aAAA,GAAgBF,WAAA,CAAYF,MAAZ,CAAmB,UAAAK,UAAA,EAAc;IACtD,IAAMC,GAAA,GAAMD,UAAA,CAAW1D,MAAX,CAAkB,CAAlB,CAAZ;IACA,IAAM4D,MAAA,GAASD,GAAA,GAAMD,UAAA,CAAWlD,MAAhC;IACA,OAAQgD,OAAA,CAAQ,CAAR,IAAaG,GAAb,IAAoBH,OAAA,CAAQ,CAAR,IAAaI,MAAzC;EACA,CAJqB,EAInB7B,GAJmB,CAIf,UAAA8B,MAAA;IAAA,OAAUA,MAAA,CAAOvB,EAAjB;EAAA,CAJe,CAAtB;EAMA,OAAOmB,aAAP;AACA;AAED,SAASK,QAATA,CAAkBC,KAAlB,EAAyBvD,MAAzB,EAAiC+B,OAAjC,EAA0CI,UAA1C,EAAsD;EACrD,IAAIoB,KAAA,CAAMC,gBAAN,IAA0BtE,YAAA,CAAaqE,KAAA,CAAME,MAAnB,CAA9B,EAA0D;IACzD,IAAIC,KAAA,CAAM3B,OAAN,CAAJ,EAAoB,MAAM,IAAI4B,KAAJ,CAAU,8CAAV,CAAN;IACpB,IAAIJ,KAAA,CAAMC,gBAAV,EAA4BD,KAAA,CAAMC,gBAAN,CAAuBrB,UAAA,GAAa,CAAC,CAAD,EAAInC,MAAJ,CAAb,GAA2B,CAACA,MAAD,EAAS,CAAT,CAAlD,EAA+D+B,OAA/D;IAC5B,IAAIwB,KAAA,CAAMK,UAAV,EAAsBL,KAAA,CAAMM,KAAN,CAAY1B,UAAA,GAAa,CAAC,CAAD,EAAInC,MAAJ,CAAb,GAA2B,CAACA,MAAD,EAAS,CAAT,CAAvC,EAAoD+B,OAApD,CAA4DA,OAA5D;EACtB,CAJD,MAIO;IAAA,IAAA+B,KAAA,GACkBJ,KAAA,CAAM3B,OAAN,IACrBA,OADqB,GAErB;QAAEoB,GAAA,EAAKpB,OAAP;QAAgBqB,MAAA,EAAQrB;MAAxB,CAHG;MACEoB,GADF,GAAAW,KAAA,CACEX,GADF;MACOC,MADP,GAAAU,KAAA,CACOV,MADP;IAKNG,KAAA,CAAMM,KAAN,CAAY1B,UAAA,GAAa,CAACgB,GAAD,EAAMnD,MAAA,GAASoD,MAAf,CAAb,GAAsC,CAACpD,MAAA,GAASoD,MAAV,EAAkBD,GAAlB,CAAlD;EACA;EACD,OAAOI,KAAP;AACA;AAED,SAASQ,mBAATA,CAA6B/B,QAA7B,EAAuCE,MAAvC,EAA+C8B,QAA/C,EAAyD;EACxD,IAAMC,OAAA,GAAUjC,QAAA,CAAST,GAAT,CAAa,UAAA2C,UAAA;IAAA,OAC5BF,QAAA,CAASzC,GAAT,CAAapB,MAAA,CAAO+D,UAAP,CAAb,CAD4B;EAAA,CAAb,CAAhB;EAGA,IAAMC,UAAA,GAAaxF,WAAA,CAAYsF,OAAZ,CAAnB;EACA;EACA,IAAMG,WAAA,GAAelC,MAAA,CAAOuB,MAAR,GACjBhF,MAAA,CAAO0F,UAAP,CADiB,GAEjBzF,GAAA,CAAIyF,UAAJ,EAAgBhE,MAAhB,EAFH;EAIA,OAAOiE,WAAP;AACA;AAGD,OAAO,SAASC,gCAATA,CACNtB,WADM,EAAAuB,KAAA,EAGNC,OAHM,EAINC,EAJM,EAKNC,WALM,EAML;EAAA,IAJCT,QAID,GAAAM,KAAA,CAJCN,QAID;IAJWU,SAIX,GAAAJ,KAAA,CAJWI,SAIX;IAJsBC,gBAItB,GAAAL,KAAA,CAJsBK,gBAItB;IAJwCC,QAIxC,GAAAN,KAAA,CAJwCM,QAIxC;EACD,IAAMC,QAAA,GAAW9B,WAAA,CACfxB,GADe,CACX,UAAAuD,KAAA,EAA8C;IAAA,IAA3C1C,kBAA2C,GAAA0C,KAAA,CAA3C1C,kBAA2C;MAAvBJ,QAAuB,GAAA8C,KAAA,CAAvB9C,QAAuB;MAAbE,MAAa,GAAA4C,KAAA,CAAb5C,MAAa;IAElD,IAAMkC,WAAA,GAAcnF,SAAA,CAAUmD,kBAAV,IACjBA,kBAAA,CAAmB;MAAE4B,QAAA,EAAAA,QAAF;MAAYO,OAAA,EAAAA,OAAZ;MAAqBG,SAAA,EAAAA,SAArB;MAAgCC,gBAAA,EAAAA,gBAAhC;MAAkDC,QAAA,EAAAA;IAAlD,CAAnB,CADiB,GAEjBb,mBAAA,CAAoB/B,QAApB,EAA8BE,MAA9B,EAAsC8B,QAAtC,CAFH;;IAIA;;IAEA,IAAMe,SAAA,GAAY9F,SAAA,CAAUuF,EAAV,IACftC,MAAA,CAAO2B,KAAP,GAAetC,GAAf,CAAmB,UAAAC,IAAA;MAAA,OAAQA,IAAA,GAAOgD,EAAf;IAAA,CAAnB,EAAsCjD,GAAtC,CAA0CW,MAAA,CAAOuB,MAAjD,CADe,GAEfvB,MAAA,CAAOS,MAAP,EAFH;IAGA,OAAO;MACNyB,WAAA,EAAAA,WADM;MAENW,SAAA,EAAAA,SAFM;MAGNC,WAAA,EAAa9C,MAAA,CAAOS,MAAP;IAHP,CAAP;EAKA,CAjBe,CAAjB;EAmBA,IAAMsC,OAAA,GAAUjG,MAAA,GACdiG,OADc,CACN,UAAC5B,MAAD,EAAA6B,KAAA,EAAqD;IAAA,IAA1Cd,WAA0C,GAAAc,KAAA,CAA1Cd,WAA0C;MAA7BW,SAA6B,GAAAG,KAAA,CAA7BH,SAA6B;MAAlBC,WAAkB,GAAAE,KAAA,CAAlBF,WAAkB;IAAA,IACrDlD,EADqD,GACkBuB,MADlB,CACrDvB,EADqD;MACjDC,OADiD,GACkBsB,MADlB,CACjDtB,OADiD;MACxC/B,MADwC,GACkBqD,MADlB,CACxCrD,MADwC;MAChCkC,MADgC,GACkBmB,MADlB,CAChCnB,MADgC;MACxBK,IADwB,GACkBc,MADlB,CACxBd,IADwB;MAClBJ,UADkB,GACkBkB,MADlB,CAClBlB,UADkB;MAAAgD,mBAAA,GACkB9B,MADlB,CACNb,WADM;MACNA,WADM,GAAA2C,mBAAA,KAAA9D,SAAA,GACQ,KADR,GAAA8D,mBAAA;IAG7D,IAAMC,OAAA,GAAUnG,SAAA,CAAUwF,WAAV,IACbA,WAAA,CAAYY,OAAZ,CAAoBvD,EAApB,IAA0B,CAAC,CADd,GAEb,IAFH;IAGA,IAAMa,MAAA,GAASJ,IAAA,IAAQC,WAAR,GACZ4C,OAAA,GAAUL,SAAV,GAAsBC,WADV,GAEZZ,WAFH;;IAIA;IACA;IACA,IAAMkB,SAAA,GAAYhC,QAAA,CACjBpB,MAAA,CAAOG,IAAP,GAAcM,MAAd,CAAqBA,MAArB,CADiB,EACa3C,MADb,EACqB+B,OADrB,EAC8BI,UAD9B,CAAlB;IAGA,OAAAR,QAAA,KACI0B,MADJ;MAECnB,MAAA,EAAQoD,SAFT;MAGClB,WAAA,EAAaA;IAHd;IAKA;EACA,CAtBc,CAAhB;EAwBA,IAAMmB,kBAAA,GAAqBN,OAAA,CAAQlC,WAAR,EAAqB8B,QAArB,CAA3B;EACA;EACA;;EAEA,OAAOU,kBAAP;AACA;AAED,OAAO,SAASC,cAATA,CAAwBC,MAAxB,EAAgCf,SAAhC,EAA2C1B,OAA3C,EAAoDgB,QAApD,EAA8D;EACpE,IAAI0B,MAAA,SAAJ;IAAYC,IAAA,SAAZ;EACA,IAAIF,MAAA,CAAOhC,MAAX,EAAmB;IAClBiC,MAAA,GAASD,MAAA,CAAOhC,MAAP,CAAcT,OAAA,CAAQ,CAAR,CAAd,CAAT;IACA2C,IAAA,GAAO5G,cAAA,CAAeiF,QAAf,EAAyB0B,MAAzB,EAAiChB,SAAjC,CAAP;EACA,CAHD,MAGO;IACN,IAAMrE,CAAA,GAAIoF,MAAA,CAAO5B,KAAP,GAAetC,GAAf,CAAmB,UAAClB,CAAD,EAAIuF,GAAJ;MAAA,OAAa;QAAEC,CAAA,EAAGC,IAAA,CAAKC,GAAL,CAAS1F,CAAA,GAAI2C,OAAA,CAAQ,CAAR,CAAb,CAAL;QAA+B4C,GAAA,EAAAA;MAA/B,CAAb;IAAA,CAAnB,EAAuEI,MAAvE,CAA8E,UAAClF,CAAD,EAAIC,CAAJ;MAAA,OAAUD,CAAA,CAAE+E,CAAF,GAAM9E,CAAA,CAAE8E,CAAR,GAAY/E,CAAZ,GAAgBC,CAA1B;IAAA,CAA9E,CAAV;IACA4E,IAAA,GAAO1G,SAAA,CAAUoB,CAAV,IAAe2D,QAAA,CAAS3D,CAAA,CAAEuF,GAAX,CAAf,GAAiC5B,QAAA,CAAS,CAAT,CAAxC;IACA;EACA;EACD,OAAO2B,IAAP;AACA;AAED,OAAO,SAASM,SAATA,CAAmBR,MAAnB,EAA2Bf,SAA3B,EAAsC1B,OAAtC,EAA+CgB,QAA/C,EAAyD;EAE/D,IAAI0B,MAAA,SAAJ;IAAYC,IAAA,SAAZ;EACA,IAAIF,MAAA,CAAOhC,MAAX,EAAmB;IAClBiC,MAAA,GAASD,MAAA,CAAOhC,MAAP,CAAcT,OAAA,CAAQ,CAAR,CAAd,CAAT;IACA,IAAI0C,MAAA,GAAShB,SAAA,CAAU7F,IAAA,CAAKmF,QAAL,CAAV,CAAT,IAAsCyB,MAAA,CAAOS,KAAjD,EAAwD;MACvD,OAAOJ,IAAA,CAAKK,KAAL,CAAWT,MAAX,CAAP;IACA,CAFD,MAEO;MACNC,IAAA,GAAO5G,cAAA,CAAeiF,QAAf,EAAyB0B,MAAzB,EAAiChB,SAAjC,CAAP;IACA;EACD,CAPD,MAOO;IACN,IAAMrE,CAAA,GAAIoF,MAAA,CAAO5B,KAAP,GAAetC,GAAf,CAAmB,UAAClB,CAAD,EAAIuF,GAAJ;MAAA,OAAa;QAAEC,CAAA,EAAGC,IAAA,CAAKC,GAAL,CAAS1F,CAAA,GAAI2C,OAAA,CAAQ,CAAR,CAAb,CAAL;QAA+B4C,GAAA,EAAAA;MAA/B,CAAb;IAAA,CAAnB,EAAuEI,MAAvE,CAA8E,UAAClF,CAAD,EAAIC,CAAJ;MAAA,OAAUD,CAAA,CAAE+E,CAAF,GAAM9E,CAAA,CAAE8E,CAAR,GAAY/E,CAAZ,GAAgBC,CAA1B;IAAA,CAA9E,CAAV;IACA4E,IAAA,GAAO1G,SAAA,CAAUoB,CAAV,IAAe2D,QAAA,CAAS3D,CAAA,CAAEuF,GAAX,CAAf,GAAiC5B,QAAA,CAAS,CAAT,CAAxC;IACA;EACA;EACD,OAAOU,SAAA,CAAUiB,IAAV,CAAP;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}